/*! Palindrom, version: 6.1.0 */
var Palindrom=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r});class o extends Error{constructor(e){super(e),this.message=e}}class r extends o{constructor(e,t,n,o){if(!t||!["Server","Client"].includes(t))throw new TypeError("Error constructing PalindromConnectionError, `side` parameter is required and can either be 'Server' or 'Client'");super(e),this.side=t,this.message=`${t} error\n\t${e.replace(/\n/g,"\n\t")}`,this.url=n,this.connectionType=o}}},function(e,t,n){var o=n(17),r=n(18);e.exports={JSONPatchQueue:o,JSONPatchQueueSynchronous:r,__esModule:!0}},function(e,t){e.exports=URL},function(e,t){
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},o=Object.prototype.hasOwnProperty;function r(e,t){return o.call(e,t)}function i(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var o in e)r(e,o)&&t.push(o);return t}function s(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function a(e,t){var n;for(var o in e)if(r(e,o)){if(e[o]===t)return s(o)+"/";if("object"==typeof e[o]&&""!=(n=a(e[o],t)))return s(o)+"/"+n}return""}function c(e,t){var n=[e];for(var o in t){var r="object"==typeof t[o]?JSON.stringify(t[o],null,2):t[o];void 0!==r&&n.push(o+": "+r)}return n.join("\n")}t.hasOwnProperty=r,t._objectKeys=i,t._deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},t.isInteger=function(e){for(var t,n=0,o=e.length;n<o;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0},t.escapePathComponent=s,t.unescapePathComponent=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},t._getPathRecursive=a,t.getPath=function(e,t){if(e===t)return"/";var n=a(e,t);if(""===n)throw new Error("Object not found in root");return"/"+n},t.hasUndefined=function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var n=0,o=t.length;n<o;n++)if(e(t[n]))return!0}else if("object"==typeof t){var r=i(t),s=r.length;for(n=0;n<s;n++)if(e(t[r[n]]))return!0}return!1};var h=function(e){function t(t,n,o,r,i){e.call(this,c(t,{name:n,index:o,operation:r,tree:i})),this.name=n,this.index=o,this.operation=r,this.tree=i,this.message=c(t,{name:n,index:o,operation:r,tree:i})}return n(t,e),t}(Error);t.PatchError=h},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var o=n(0);const r="Client";function i(e,t,n,i){let s,a;this.start=function(){s||(s=setTimeout(()=>{this.notifySend(),e()},n))},this.notifySend=function(){clearTimeout(s),s=null,a||(a=setTimeout(()=>{a=null,t(new o.a("Timeout has passed and response hasn't arrived",r,this.remoteUrl,"Unknown"))},i))},this.notifyReceive=function(){clearTimeout(a),a=null,this.start()},this.stop=()=>{clearTimeout(s),s=null,clearTimeout(a),a=null}}function s(){this.start=this.stop=this.notifySend=this.notifyReceive=()=>{}}},function(e,t){e.exports=WebSocket},function(e,t,n){
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var o=n(3),r=n(7),i=n(7);t.applyOperation=i.applyOperation,t.applyPatch=i.applyPatch,t.applyReducer=i.applyReducer,t.getValueByPointer=i.getValueByPointer,t.validate=i.validate,t.validator=i.validator;var s=n(3);t.JsonPatchError=s.PatchError,t.deepClone=s._deepClone,t.escapePathComponent=s.escapePathComponent,t.unescapePathComponent=s.unescapePathComponent;var a=new WeakMap,c=function(e){this.observers=new Map,this.obj=e},h=function(e,t){this.callback=e,this.observer=t};function p(e){var t=a.get(e.object);u(t.value,e.object,e.patches,""),e.patches.length&&r.applyPatch(t.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function u(e,t,n,r){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var i=o._objectKeys(t),s=o._objectKeys(e),a=!1,c=s.length-1;c>=0;c--){var h=e[l=s[c]];if(!o.hasOwnProperty(t,l)||void 0===t[l]&&void 0!==h&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(n.push({op:"remove",path:r+"/"+o.escapePathComponent(l)}),a=!0):(n.push({op:"replace",path:r,value:t}),!0);else{var p=t[l];"object"==typeof h&&null!=h&&"object"==typeof p&&null!=p?u(h,p,n,r+"/"+o.escapePathComponent(l)):h!==p&&(!0,n.push({op:"replace",path:r+"/"+o.escapePathComponent(l),value:o._deepClone(p)}))}}if(a||i.length!=s.length)for(c=0;c<i.length;c++){var l=i[c];o.hasOwnProperty(e,l)||void 0===t[l]||n.push({op:"add",path:r+"/"+o.escapePathComponent(l),value:o._deepClone(t[l])})}}}t.unobserve=function(e,t){t.unobserve()},t.observe=function(e,t){var n,r=function(e){return a.get(e)}(e);if(r){var i=function(e,t){return e.observers.get(t)}(r,t);n=i&&i.observer}else r=new c(e),a.set(e,r);if(n)return n;if(n={},r.value=o._deepClone(e),t){n.callback=t,n.next=null;var s=function(){p(n)},u=function(){clearTimeout(n.next),n.next=setTimeout(s)};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mouseup",u),window.addEventListener("keyup",u),window.addEventListener("mousedown",u),window.addEventListener("keydown",u),window.addEventListener("change",u)):(document.documentElement.attachEvent("onmouseup",u),document.documentElement.attachEvent("onkeyup",u),document.documentElement.attachEvent("onmousedown",u),document.documentElement.attachEvent("onkeydown",u),document.documentElement.attachEvent("onchange",u)))}return n.patches=[],n.object=e,n.unobserve=function(){p(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mouseup",u),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",u),window.removeEventListener("keydown",u)):(document.documentElement.detachEvent("onmouseup",u),document.documentElement.detachEvent("onkeyup",u),document.documentElement.detachEvent("onmousedown",u),document.documentElement.detachEvent("onkeydown",u)))},r.observers.set(t,new h(t,n)),n},t.generate=p,t.compare=function(e,t){var n=[];return u(e,t,n,""),n}},function(e,t,n){var o={strict:!0},r=n(14),i=function(e,t){return r(e,t,o)},s=n(3);t.JsonPatchError=s.PatchError,t.deepClone=s._deepClone;var a={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var o=e[t];return delete e[t],{newDocument:n,removed:o}},replace:function(e,t,n){var o=e[t];return e[t]=this.value,{newDocument:n,removed:o}},move:function(e,t,n){var o=h(n,this.path);o&&(o=s._deepClone(o));var r=p(n,{op:"remove",path:this.from}).removed;return p(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:o}},copy:function(e,t,n){var o=h(n,this.from);return p(n,{op:"add",path:this.path,value:s._deepClone(o)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:i(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},c={add:function(e,t,n){return s.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var o=e[t];return e[t]=this.value,{newDocument:n,removed:o}},move:a.move,copy:a.copy,test:a.test,_get:a._get};function h(e,t){if(""==t)return e;var n={op:"_get",path:t};return p(e,n),n.value}function p(e,n,o,r,p,u){if(void 0===o&&(o=!1),void 0===r&&(r=!0),void 0===p&&(p=!0),void 0===u&&(u=0),o&&("function"==typeof o?o(n,0,e,n.path):l(n,0)),""===n.path){var f={newDocument:e};if("add"===n.op)return f.newDocument=n.value,f;if("replace"===n.op)return f.newDocument=n.value,f.removed=e,f;if("move"===n.op||"copy"===n.op)return f.newDocument=h(e,n.from),"move"===n.op&&(f.removed=e),f;if("test"===n.op){if(f.test=i(e,n.value),!1===f.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",u,n,e);return f.newDocument=e,f}if("remove"===n.op)return f.removed=e,f.newDocument=null,f;if("_get"===n.op)return n.value=e,f;if(o)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",u,n,e);return f}r||(e=s._deepClone(e));var d=(n.path||"").split("/"),v=e,y=1,w=d.length,b=void 0,m=void 0,g=void 0;for(g="function"==typeof o?o:l;;){if(m=d[y],p&&"__proto__"==m)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(o&&void 0===b&&(void 0===v[m]?b=d.slice(0,y).join("/"):y==w-1&&(b=n.path),void 0!==b&&g(n,0,e,b)),y++,Array.isArray(v)){if("-"===m)m=v.length;else{if(o&&!s.isInteger(m))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",u,n,e);s.isInteger(m)&&(m=~~m)}if(y>=w){if(o&&"add"===n.op&&m>v.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",u,n,e);if(!1===(f=c[n.op].call(n,v,m,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",u,n,e);return f}}else if(m&&-1!=m.indexOf("~")&&(m=s.unescapePathComponent(m)),y>=w){if(!1===(f=a[n.op].call(n,v,m,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",u,n,e);return f}v=v[m]}}function u(e,n,o,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),o&&!Array.isArray(n))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=s._deepClone(e));for(var a=new Array(n.length),c=0,h=n.length;c<h;c++)a[c]=p(e,n[c],o,!0,i,c),e=a[c].newDocument;return a.newDocument=e,a}function l(e,n,o,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,e,o);if(!a[e.op])throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,e,o);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,e,o);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",n,e,o);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,e,o);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,e,o);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&s.hasUndefined(e.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,e,o);if(o)if("add"==e.op){var i=e.path.split("/").length,c=r.split("/").length;if(i!==c+1&&i!==c)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,e,o)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,e,o)}else if("move"===e.op||"copy"===e.op){var h=f([{op:"_get",path:e.from,value:void 0}],o);if(h&&"OPERATION_PATH_UNRESOLVABLE"===h.name)throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,e,o)}}function f(e,n,o){try{if(!Array.isArray(e))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(n)u(s._deepClone(n),s._deepClone(e),o||!0);else{o=o||l;for(var r=0;r<e.length;r++)o(e[r],r,n,void 0)}}catch(e){if(e instanceof t.JsonPatchError)return e;throw e}}t.getValueByPointer=h,t.applyOperation=p,t.applyPatch=u,t.applyReducer=function(e,n,o){var r=p(e,n);if(!1===r.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",o,n,e);return r.newDocument},t.validator=l,t.validate=f},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var o=n(2),r=n.n(o),i=n(0),s=n(4),a=n(5),c=n.n(a),h=n(9),p=n.n(h);const u="Client",l="Server";function f(e){return e.replace(/^http/i,"ws")}class d{constructor(e,t,n,o,i,a,c,h,p){if(this.palindrom=e,"undefined"!=typeof window&&window.location?this.remoteUrl=new r.a(t,window.location.href):this.remoteUrl=new r.a(t),o&&(this.onReceive=o),i&&(this.onSend=i),a&&(this.onConnectionError=a),h&&(this.onStateChange=h),c&&(this.onSocketOpened=c),Object.defineProperty(this,"useWebSocket",{get:function(){return n},set:e=>(n=e,0==e?this._ws&&(this._ws.onclose=function(){this._ws=null},this._ws.close()):this.wsUrl||(this.wsUrl=f(this.remoteUrl.href)),n)}),p){const e=1e3*p;this.heartbeat=new s.a(()=>{this.send([])},this._handleConnectionError.bind(this),e,e)}else this.heartbeat=new s.b}async _establish(e=null){this.heartbeat.stop();const t=e?await this._fetch("PATCH",this.remoteUrl.href+"/reconnect","application/json",JSON.stringify(e)):await this._fetch("GET",this.remoteUrl.href,"application/json",null);return this.useWebSocket&&this.webSocketUpgrade(this.onSocketOpened),this.heartbeat.start(),t}_handleConnectionError(e){this.heartbeat.stop(),this.palindrom.reconnector.triggerReconnection(),this.onConnectionError(e)}_handleFatalError(e){this.heartbeat.stop(),this.palindrom.reconnector.stopReconnecting(),this.onConnectionError(e)}_notifyReceive(){this.heartbeat.notifyReceive(),this.onReceive(...arguments)}async send(e){this.heartbeat.notifySend();const t=JSON.stringify(e);if(this.useWebSocket&&this._ws&&1===this._ws.readyState)this._ws.send(t),this.onSend(t,this._ws.url,"WS");else{const e=this.remoteUrl.href,n="PATCH",o=await this._fetch(n,e,"application/json-patch+json",t);this._notifyReceive(o,e,n)}return this}onReceive(){}onSend(){}onStateChange(){}upgrade(e){}webSocketUpgrade(e){this.wsUrl=f(this.remoteUrl.href);const t=this.wsUrl;this.closeConnection();const n=c.a.w3cwebsocket||c.a;this._ws=new n(t),this._ws.onopen=n=>{this.onStateChange(this._ws.readyState,t),e&&e(n)},this._ws.onmessage=e=>{try{var t=JSON.parse(e.data)}catch(t){return void this._handleFatalError(new i.a(e.data,l,this._ws.url,"WS"))}this._notifyReceive(t,this._ws.url,"WS")},this._ws.onerror=e=>{if(this.onStateChange(this._ws.readyState,t,e.data),!this.useWebSocket)return;const n=["WebSocket connection could not be made","readyState: "+this._ws.readyState].join("\n");this._handleFatalError(new i.a(n,u,t,"WS"))},this._ws.onclose=e=>{this.onStateChange(this._ws.readyState,t,null,e.code,e.reason);const n=["WebSocket connection closed unexpectedly.","reason: "+e.reason,"readyState: "+this._ws.readyState,"stateCode: "+e.code].join("\n");e.reason?this._handleFatalError(new i.a(n,l,t,"WS")):e.wasClean||this._handleConnectionError(new i.a(n,l,t,"WS"))}}closeConnection(){this._ws&&(this._ws.onclose=()=>{},this._ws.close(),this._ws=null)}async getPatchUsingHTTP(e){const t=await this._fetch("GET",e,"application/json-patch+json",null,!0);return this._notifyReceive(t,e,"GET"),t}_setRemoteUrl(e){if(this.remoteUrlSet&&this.remoteUrl&&this.remoteUrl!=e){const t=["Session lost.","Server replied with a different session ID than the already set one.","Possibly a server restart happened while you were working.","Please reload the page.","Previous session ID: "+this.remoteUrl,"New session ID: "+e].join("\n");throw new i.b(t)}this.remoteUrlSet=!0,this.remoteUrl=new r.a(e,this.remoteUrl.href)}_handleLocationHeader(e){const t=e.headers.get("x-location")||e.headers.get("location");t&&this._setRemoteUrl(t)}async _handleFailureResponse(e,t,n){var o=`An unknown network error has occurred. Raw message: ${n.message}`;console.error(n);const r=[o,"statusCode: -1","reason: Maybe you lost connection with the server","url: "+e,"HTTP method: "+t].join("\n");this._handleFatalError(new i.a(r,u,e,t))}async _fetch(t,n,o,r,i){const s={headers:{},method:t,credentials:"include"},a=s.headers;r&&(a["Content-Type"]="application/json-patch+json",s.body=r),o&&(a.Accept=o),this.remoteUrl&&i&&(a["X-Referer"]=this.remoteUrl.pathname),this.onSend(r,n,t);let c=void 0!==e&&e.fetch||p.a;const h=await c(n,s);return h.json().then(e=>{if(h.status<500)return this._handleLocationHeader(h),e;throw new Error(`HTTP ${h.status} response: response body is ${JSON.stringify(e)}`)}).catch(e=>{throw this._handleFailureResponse(n,t,e),e})}}}).call(this,n(13))},function(e,t){e.exports=null},function(e,t,n){"use strict";
/*!
 * https://github.com/Palindrom/JSONPatcherProxy
 * (c) 2017 Starcounter 
 * MIT license
 */const o=function(){function e(e){return-1==e.indexOf("/")&&-1==e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function t(e,t){const n=[];let o=e.parenthoodMap.get(t);for(;o&&o.path;)n.unshift(o.path),o=e.parenthoodMap.get(o.parent);if(n.length){return"/"+n.join("/")}return""}function n(e,t){this.isProxifyingTreeNow=!1,this.isObserving=!1,this.proxifiedObjectsMap=new Map,this.parenthoodMap=new Map,"boolean"!=typeof t&&(t=!0),this.showDetachedWarning=t,this.originalObject=e,this.cachedProxy=null,this.isRecording=!1,this.userCallback,this.resume=function(){this.defaultCallback=e=>{this.isRecording&&this.patches.push(e),this.userCallback&&this.userCallback(e)},this.isObserving=!0}.bind(this),this.pause=function(){this.defaultCallback=()=>{},this.isObserving=!1}.bind(this)}return n.deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},n.escapePathComponent=e,n.prototype.generateProxyAtPath=function(n,o,r){if(!o)return o;const i={set:(n,o,r,i)=>(function(n,o,r,i){const s=t(n,o)+"/"+e(r);if(n.proxifiedObjectsMap.has(i)){const e=n.proxifiedObjectsMap.get(i);n.parenthoodMap.set(e.originalObject,{parent:o,path:r})}const a=n.proxifiedObjectsMap.get(i);a&&!n.isProxifyingTreeNow&&(a.inherited=!0),i&&"object"==typeof i&&!n.proxifiedObjectsMap.has(i)&&(n.parenthoodMap.set(i,{parent:o,path:r}),i=n._proxifyObjectTreeRecursively(o,i,r));const c={op:"remove",path:s};if(void 0===i){if(!Array.isArray(o)&&!o.hasOwnProperty(r))return Reflect.set(o,r,i);{Array.isArray(o)&&(c.op="replace",c.value=null);const e=n.proxifiedObjectsMap.get(o[r]);e&&(n.parenthoodMap.delete(o[r]),n.disableTrapsForProxy(e),n.proxifiedObjectsMap.delete(e))}}else{if(Array.isArray(o)&&!Number.isInteger(+r.toString()))return"length"!=r&&console.warn("JSONPatcherProxy noticed a non-integer prop was set for an array. This will not emit a patch"),Reflect.set(o,r,i);c.op="add",o.hasOwnProperty(r)&&(void 0!==o[r]||Array.isArray(o))&&(c.op="replace"),c.value=i}const h=Reflect.set(o,r,i);return n.defaultCallback(c),h})(this,n,o,r),deleteProperty:(n,o)=>(function(n,o,r){if(void 0!==o[r]){const i=t(n,o)+"/"+e(r),s=n.proxifiedObjectsMap.get(o[r]);s&&(s.inherited?s.inherited=!1:(n.parenthoodMap.delete(s.originalObject),n.disableTrapsForProxy(s),n.proxifiedObjectsMap.delete(o[r])));const a=Reflect.deleteProperty(o,r);return n.defaultCallback({op:"remove",path:i}),a}})(this,n,o)},s=Proxy.revocable(o,i);return s.trapsInstance=i,s.originalObject=o,this.parenthoodMap.set(o,{parent:n,path:r}),this.proxifiedObjectsMap.set(s.proxy,s),s.proxy},n.prototype._proxifyObjectTreeRecursively=function(t,n,o){for(let t in n)n.hasOwnProperty(t)&&n[t]instanceof Object&&(n[t]=this._proxifyObjectTreeRecursively(n,n[t],e(t)));return this.generateProxyAtPath(t,n,o)},n.prototype.proxifyObjectTree=function(e){this.pause(),this.isProxifyingTreeNow=!0;const t=this._proxifyObjectTreeRecursively(void 0,e,"");return this.isProxifyingTreeNow=!1,this.resume(),t},n.prototype.disableTrapsForProxy=function(e){if(this.showDetachedWarning){const t="You're accessing an object that is detached from the observedObject tree, see https://github.com/Palindrom/JSONPatcherProxy#detached-objects";e.trapsInstance.set=(e,n,o)=>(console.warn(t),Reflect.set(e,n,o)),e.trapsInstance.set=(e,n,o)=>(console.warn(t),Reflect.set(e,n,o)),e.trapsInstance.deleteProperty=(e,t)=>Reflect.deleteProperty(e,t)}else delete e.trapsInstance.set,delete e.trapsInstance.get,delete e.trapsInstance.deleteProperty},n.prototype.observe=function(e,t){if(!e&&!t)throw new Error("You need to either record changes or pass a callback");return this.isRecording=e,this.userCallback=t,e&&(this.patches=[]),this.cachedProxy=this.proxifyObjectTree(this.originalObject),this.cachedProxy},n.prototype.generate=function(){if(!this.isRecording)throw new Error("You should set record to true to get patches later");return this.patches.splice(0,this.patches.length)},n.prototype.revoke=function(){this.proxifiedObjectsMap.forEach(e=>{e.revoke()})},n.prototype.disableTraps=function(){this.proxifiedObjectsMap.forEach(this.disableTrapsForProxy,this)},n}();e.exports=o,e.exports.default=o},function(e,t,n){
/*!
 * https://github.com/Palindrom/JSONPatchOT
 * JSON-Patch-OT version: 1.0.1
 * (c) 2017 Tomek Wytrebowicz
 * MIT license
 */
var o=function(){var e=e||{};e.transform=function(e,n){var o=[];o=o.concat.apply(o,n);var r=JSON.parse(JSON.stringify(e));return o.reduce(t,r)},e.transformAgainstSingleOp=function(e,t){};var t=function(e,t){if(void 0===t.value&&("add"===t.op||"replace"===t.op||"test"===t.op))throw new Error("'value' MUST be defined");if(void 0===t.from&&("copy"===t.op||"move"===t.op))throw new Error("'from' MUST be defined");if(n[t.op])if("function"==typeof n[t.op])n[t.op](t,e);else for(var o=e.length,r=0;r<o;){var i=e[r];r++,n[t.op][i.op]&&n[t.op][i.op](t,i)}return e},n={remove:function(e,t){for(var n,i=t.length,s=0;n=t[s];)("add"!==n.op&&"test"!==n.op||e.path!==n.path)&&(n.from&&(n.from===e.path||0===n.from.indexOf(e.path+"/"))||e.path===n.path||0===n.path.indexOf(e.path+"/"))&&(t.splice(s,1),i--,s--),s++;var a=e.path.lastIndexOf("/");if(a>-1){var c=e.path.substr(a+1),h=e.path.substr(0,a+1);if(r(c))for(i=t.length,s=0;s<i;)n=t[s],s++,0===n.path.indexOf(h)&&(n.path=o(n.path,h,c)),n.from&&0===n.from.indexOf(h)&&(n.from=o(n.from,h,c))}},replace:function(e,t){for(var n,o=0;n=t[o];)(n.from&&(n.from===e.path||0===n.from.indexOf(e.path+"/"))||0===n.path.indexOf(e.path+"/"))&&(t.splice(o,1),o--),o++}};function o(e,t,n){var o=e.substr(t.length),i=o.indexOf("/");i>-1||(i=o.length);var s=o.substr(0,i),a=o.substr(i);return r(s)&&s>n?t+(s-1)+a:e}function r(e){var t=~~Number(e);return String(t)===e&&t>=0}return e}();e.exports=o,e.exports.default=o,e.exports.__esModule=!0},function(e,t,n){if(void 0===o)var o=n(1).JSONPatchQueue;var r=function(e,t,n,r,i){o.call(this,e,n,r,i),this.transform=t,this.pending=[]};(r.prototype=Object.create(o.prototype)).constructor=r,r.prototype.ackLocalVersion=0,r.prototype.send=function(e){var t=e.slice(0);t.unshift({op:"test",path:this.remotePath,value:this.remoteVersion});var n=o.prototype.send.call(this,t);return this.pending.push(n),n},r.prototype.receive=function(e,t){var n=t||this.apply,r=this;return o.prototype.receive.call(this,e,function(e,t){var o=t.slice(0),i=o.shift().value,s=i-r.ackLocalVersion;return r.ackLocalVersion=i,r.pending.splice(0,s),r.pending.length&&(o=r.transform(o,r.pending)),r.obj=n(r.obj,o)})},r.prototype.reset=function(e){return this.ackLocalVersion=o.getPropertyByJsonPointer(e,this.localPath),this.pending=[],this.obj=o.prototype.reset.call(this,e)},e.exports=r,e.exports.default=r,e.exports.__esModule=!0},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var o=Array.prototype.slice,r=n(15),i=n(16),s=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var h,p;if(a(e)||a(t))return!1;if(e.prototype!==t.prototype)return!1;if(i(e))return!!i(t)&&(e=o.call(e),t=o.call(t),s(e,t,n));if(c(e)){if(!c(t))return!1;if(e.length!==t.length)return!1;for(h=0;h<e.length;h++)if(e[h]!==t[h])return!1;return!0}try{var u=r(e),l=r(t)}catch(e){return!1}if(u.length!=l.length)return!1;for(u.sort(),l.sort(),h=u.length-1;h>=0;h--)if(u[h]!=l[h])return!1;for(h=u.length-1;h>=0;h--)if(p=u[h],!s(e[p],t[p],n))return!1;return typeof e==typeof t}(e,t,n))};function a(e){return null==e}function c(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n},function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function o(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function r(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?o:r).supported=o,t.unsupported=r},function(e,t,n){var o=function(e,t,n,o){this.obj=e,this.waiting=[],this.localPath=t[0],this.remotePath=t[1],this.apply=n,this.purist=o};o.prototype.localVersion=0,o.prototype.remoteVersion=0,o.prototype.receive=function(e,t){var n=t||this.apply,o=e.slice(0);if(this.purist)o.shift();var r=o.shift().value;if(r<=this.remoteVersion)throw new Error("Given version was already applied.");if(r==this.remoteVersion+1)for(;o;)this.remoteVersion++,this.obj=n(this.obj,o),o=this.waiting.shift();else this.waiting[r-this.remoteVersion-2]=o},o.prototype.send=function(e){this.localVersion++;var t=e.slice(0);return this.purist?t.unshift({op:"test",path:this.localPath,value:this.localVersion-1},{op:"replace",path:this.localPath,value:this.localVersion}):t.unshift({op:"replace",path:this.localPath,value:this.localVersion}),t},o.getPropertyByJsonPointer=function(e,t){var n=t.split("/");""===n[0]&&n.shift();for(var o=e;n.length;){var r=n.shift().replace("~1","/").replace("~0","~");n.length&&(o=o[r])}return o[r]},o.prototype.reset=function(e){this.remoteVersion=o.getPropertyByJsonPointer(e,this.remotePath),this.waiting=[];var t=[{op:"replace",path:"",value:e}];return this.obj=this.apply(this.obj,t)},e.exports=o,e.exports.default=o,e.exports.__esModule=!0},function(e,t,n){var o=function(e,t,n,o){this.obj=e,this.waiting=[],this.versionPath=t,this.apply=n,this.purist=o};o.prototype.version=0,o.prototype.receive=function(e,t){var n=t||this.apply,o=e.slice(0);if(this.purist)o.shift();var r=o.shift().value;if(r<=this.version)throw new Error("Given version was already applied.");if(r==this.version+1)for(;o;)this.version++,this.obj=n(this.obj,o),o=this.waiting.shift();else this.waiting[r-this.version-2]=o},o.prototype.send=function(e){this.version++;var t=e.slice(0);return t.unshift({op:"replace",path:this.versionPath,value:this.version}),this.purist&&t.unshift({op:"test",path:this.versionPath,value:this.version-1}),t},o.getPropertyByJsonPointer=function(e,t){var n=t.split("/");""===n[0]&&n.shift();for(var o=e;n.length;){var r=n.shift().replace("~1","/").replace("~0","~");n.length&&(o=o[r])}return o[r]},o.prototype.reset=function(e){this.version=o.getPropertyByJsonPointer(e,this.versionPath),this.waiting=[];var t=[{op:"replace",path:"",value:e}];return this.obj=this.apply(this.obj,t)},e.exports=o,e.exports.default=o,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t);var o=n(8),r=n(6),i=n(10),s=n.n(i),a=n(1),c=n(11),h=n.n(c),p=n(12),u=n.n(p),l=n(0);function f(e,t,n){let o,r,i,s;const a=1e3;function c(){o=a,r=0,i=!1,clearTimeout(s),s=null}const h=()=>{0==r?(t(0),i=!1,o*=2,e()):(t(r),r-=1e3,setTimeout(h,1e3))};this.triggerReconnection=()=>{i||(r=o,i=!0,h())},this.reconnectNow=()=>{r=0,o=a},this.stopReconnecting=()=>{c(),n()},c()}class d{constructor(e,t){this.obj=e,this.apply=t}send(e){return e}receive(e){return this.obj=this.apply(this.obj,e)}reset(e){const t=[{op:"replace",path:"",value:e}];return this.obj=this.apply(this.obj,t)}}n.d(t,"Palindrom",function(){return w});
/*! Palindrom
 * https://github.com/Palindrom/Palindrom
 * (c) 2017 Joachim Wester
 * MIT license
 */
const v="6.1.0";if(void 0===y)if("undefined"!=typeof window)var y=window;else y={};class w{static get version(){return v}constructor(e){if(this.version=v,"object"!=typeof e)throw new TypeError("Palindrom constructor requires an object argument.");if(!e.remoteUrl)throw new TypeError("remoteUrl is required");function t(){}e.callback&&console.warn("options.callback is deprecated. Please use `onStateReset` instead"),this.debug=null==e.debug||e.debug,this.isObserving=!1,this.onLocalChange=e.onLocalChange||t,this.onRemoteChange=e.onRemoteChange||t,this.onStateReset=e.onStateReset||e.callback||t,this.filterLocalChange=e.filterLocalChange||(e=>e),this.onPatchReceived=e.onPatchReceived||t,this.onPatchSent=e.onPatchSent||t,this.onSocketStateChanged=e.onSocketStateChanged||t,this.onConnectionError=e.onConnectionError||t,this.retransmissionThreshold=e.retransmissionThreshold||3,this.onReconnectionCountdown=e.onReconnectionCountdown||t,this.onReconnectionEnd=e.onReconnectionEnd||t,this.onSocketOpened=e.onSocketOpened||t,this.onIncomingPatchValidationError=e.onIncomingPatchValidationError||t,this.onOutgoingPatchValidationError=e.onOutgoingPatchValidationError||t,this.onError=e.onError||t,this.reconnector=new f(()=>this._connectToRemote(this.queue.pending),this.onReconnectionCountdown,this.onReconnectionEnd),this.network=new o.a(this,e.remoteUrl,e.useWebSocket||!1,this.handleRemoteChange.bind(this),this.onPatchSent.bind(this),this.onConnectionError.bind(this),this.onSocketOpened.bind(this),this.onSocketStateChanged.bind(this),e.pingIntervalS),this.OTPatchIndexOffset=0,e.localVersionPath?e.remoteVersionPath?(this.OTPatchIndexOffset=2,e.ot?this.queue=new u.a(this.obj,h.a.transform,[e.localVersionPath,e.remoteVersionPath],this.validateAndApplySequence.bind(this),e.purity):this.queue=new a.JSONPatchQueue(this.obj,[e.localVersionPath,e.remoteVersionPath],this.validateAndApplySequence.bind(this),e.purity)):(this.OTPatchIndexOffset=1,this.queue=new a.JSONPatchQueueSynchronous(this.obj,e.localVersionPath,this.validateAndApplySequence.bind(this),e.purity)):this.queue=new d(this.obj,this.validateAndApplySequence.bind(this)),this._connectToRemote()}async _connectToRemote(e=null){const t=await this.network._establish(e);this.reconnector.stopReconnecting(),this.debug&&(this.remoteObj=JSON.parse(JSON.stringify(t))),this.queue.reset(t)}get useWebSocket(){return this.network.useWebSocket}set useWebSocket(e){this.network.useWebSocket=e}_sendPatch(e){this.unobserve(),this.network.send(e),this.observe()}prepareProxifiedObject(e){e||(e={}),this.jsonPatcherProxy=new s.a(e);const t=this.jsonPatcherProxy.observe(!1,e=>{const t=this.filterLocalChange(e);t&&this.handleLocalChange(t)});Object.defineProperty(this,"obj",{get:()=>t,set(){throw new Error("palindrom.obj is readonly")},configurable:!0}),this.isObserving=!0}observe(){this.jsonPatcherProxy&&this.jsonPatcherProxy.resume(),this.isObserving=!0}unobserve(){this.jsonPatcherProxy&&this.jsonPatcherProxy.pause(),this.isObserving=!1}handleLocalChange(e){e.value&&b(e.value,this.onOutgoingPatchValidationError,e.path);const t=[e];this.debug&&this.validateSequence(this.remoteObj,t),this._sendPatch(this.queue.send(t)),this.onLocalChange(t)}validateAndApplySequence(e,t){try{this.unobserve();const n=Object(r.applyPatch)(e,t,this.debug);if(this.observe(),n.newDocument!==e){this.prepareProxifiedObject(n.newDocument),this.queue.obj=this.obj,b(this.obj,this.onIncomingPatchValidationError);try{this.onStateReset(this.obj)}catch(e){this.onError(new l.b(`Error inside onStateReset callback: ${e.message}`)),console.error(e)}}this.onRemoteChange(t,n)}catch(e){if(this.debug)return void this.onIncomingPatchValidationError(e);throw e}return this.obj}validateSequence(e,t){const n=Object(r.validate)(t,e);n&&this.onOutgoingPatchValidationError(n)}reconnectNow(){this.reconnector.reconnectNow()}handleRemoteChange(e,t,n){this.onPatchReceived(e,t,n);const o=e||[];!function(e,t,n){for(let o=n,r=e.length;o<r;o++)b(e[o].value,t,e[o].path)}(o,this.onIncomingPatchValidationError,this.OTPatchIndexOffset),0!==o.length&&this.isObserving&&(this.queue.receive(o),this.queue.pending&&this.queue.pending.length&&this.queue.pending.length>this.retransmissionThreshold&&this.queue.pending.forEach(this._sendPatch,this),this.debug&&(this.remoteObj=JSON.parse(JSON.stringify(this.obj))))}}function b(e,t,n=""){const o=typeof e;if("object"==o)for(const o in e)e.hasOwnProperty(o)&&b(e[o],t,n+"/"+o);else"number"===o&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&t(new RangeError(`A number that is either bigger than Number.MAX_INTEGER_VALUE or smaller than Number.MIN_INTEGER_VALUE has been encountered in a patch, value is: ${e}, variable path is: ${n}`))}}]).default;