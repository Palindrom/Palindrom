/*! Palindrom, version: 3.0.6 */
<<<<<<< HEAD
var Palindrom=function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(o,'a',o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=41)}([function(e,t,o){'use strict';function n(e){return'[object Array]'===d.call(e)}function r(e){return null!==e&&'object'==typeof e}function a(e){return'[object Function]'===d.call(e)}function s(e,t){if(null!==e&&'undefined'!=typeof e)if('object'==typeof e||n(e)||(e=[e]),n(e))for(var o=0,r=e.length;o<r;o++)t.call(null,e[o],o,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function p(){function e(e,o){t[o]='object'==typeof t[o]&&'object'==typeof e?p(t[o],e):e}for(var t={},o=0,n=arguments.length;o<n;o++)s(arguments[o],e);return t}var i=o(8),d=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:function(e){return'[object ArrayBuffer]'===d.call(e)},isFormData:function(e){return'undefined'!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){var t;return t='undefined'!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t},isString:function(e){return'string'==typeof e},isNumber:function(e){return'number'==typeof e},isObject:r,isUndefined:function(e){return'undefined'==typeof e},isDate:function(e){return'[object Date]'===d.call(e)},isFile:function(e){return'[object File]'===d.call(e)},isBlob:function(e){return'[object Blob]'===d.call(e)},isFunction:a,isStream:function(e){return r(e)&&a(e.pipe)},isURLSearchParams:function(e){return'undefined'!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return'undefined'!=typeof window&&'undefined'!=typeof document&&'function'==typeof document.createElement},forEach:s,merge:p,extend:function(e,t,o){return s(t,function(t,n){e[n]=o&&'function'==typeof t?i(t,o):t}),e},trim:function(e){return e.replace(/^\s*/,'').replace(/\s*$/,'')}}},function(e,t,o){var n=o(40),r=o(39);e.exports={JSONPatchQueue:n,JSONPatchQueueSynchronous:r,__esModule:!0}},function(e,t,o){'use strict';(function(t){function n(e,t){!r.isUndefined(e)&&r.isUndefined(e['Content-Type'])&&(e['Content-Type']=t)}var r=o(0),a=o(34),s=/^\)\]\}',?\n/,p={"Content-Type":'application/x-www-form-urlencoded'},i={adapter:function(){var e;return'undefined'==typeof XMLHttpRequest?'undefined'!=typeof t&&(e=o(4)):e=o(4),e}(),transformRequest:[function(e,t){return a(t,'Content-Type'),r.isFormData(e)||r.isArrayBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(n(t,'application/x-www-form-urlencoded;charset=utf-8'),e.toString()):r.isObject(e)?(n(t,'application/json;charset=utf-8'),JSON.stringify(e)):e}],transformResponse:[function(e){if('string'==typeof e){e=e.replace(s,'');try{e=JSON.parse(e)}catch(t){}}return e}],timeout:0,xsrfCookieName:'XSRF-TOKEN',xsrfHeaderName:'X-XSRF-TOKEN',maxContentLength:-1,validateStatus:function(e){return 200<=e&&300>e}};i.headers={common:{Accept:'application/json, text/plain, */*'}},r.forEach(['delete','get','head'],function(e){i.headers[e]={}}),r.forEach(['post','put','patch'],function(e){i.headers[e]=r.merge(p)}),e.exports=i}).call(t,o(11))},function(e,t){function o(e,t){return i.call(e,t)}function n(e){if(Array.isArray(e)){for(var t=Array(e.length),n=0;n<t.length;n++)t[n]=''+n;return t}if(Object.keys)return Object.keys(e);var t=[];for(var r in e)o(e,r)&&t.push(r);return t}function r(e){return-1===e.indexOf('/')&&-1===e.indexOf('~')?e:e.replace(/~/g,'~0').replace(/\//g,'~1')}function a(e,t){var n;for(var s in e)if(o(e,s)){if(e[s]===t)return r(s)+'/';if('object'==typeof e[s]&&(n=a(e[s],t),''!=n))return r(s)+'/'+n}return''}function s(e){if(e===void 0)return!0;if(e)if(Array.isArray(e)){for(var t=0,o=e.length;t<o;t++)if(s(e[t]))return!0;}else if('object'==typeof e)for(var r=n(e),a=r.length,t=0;t<a;t++)if(s(e[r[t]]))return!0;return!1}var p=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=Object.prototype.hasOwnProperty;t.hasOwnProperty=o,t._objectKeys=n;t._deepClone=function(e){switch(typeof e){case'object':return JSON.parse(JSON.stringify(e));case'undefined':return null;default:return e;}},t.isInteger=function(e){for(var t,o=0,n=e.length;o<n;){if(t=e.charCodeAt(o),48<=t&&57>=t){o++;continue}return!1}return!0},t.escapePathComponent=r,t.unescapePathComponent=function(e){return e.replace(/~1/g,'/').replace(/~0/g,'~')},t._getPathRecursive=a,t.getPath=function(e,t){if(e===t)return'/';var o=a(e,t);if(''===o)throw new Error('Object not found in root');return'/'+o},t.hasUndefined=s;var d=function(e){function t(t,o,n,r,a){e.call(this,t),this.message=t,this.name=o,this.index=n,this.operation=r,this.tree=a}return p(t,e),t}(Error);t.PatchError=d},function(e,t,o){'use strict';(function(t){var n=o(0),r=o(26),a=o(29),s=o(35),p=o(33),i=o(7),d='undefined'!=typeof window&&window.btoa&&window.btoa.bind(window)||o(28);e.exports=function(e){return new Promise(function(c,l){var h=e.data,u=e.headers;n.isFormData(h)&&delete u['Content-Type'];var f=new XMLHttpRequest,y='onreadystatechange',m=!1;if('test'===t.env.NODE_ENV||'undefined'==typeof window||!window.XDomainRequest||'withCredentials'in f||p(e.url)||(f=new window.XDomainRequest,y='onload',m=!0,f.onprogress=function(){},f.ontimeout=function(){}),e.auth){var g=e.auth.username||'',b=e.auth.password||'';u.Authorization='Basic '+d(g+':'+b)}if(f.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f[y]=function(){if(f&&(4===f.readyState||m)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf('file:'))){var t='getAllResponseHeaders'in f?s(f.getAllResponseHeaders()):null,o=e.responseType&&'text'!==e.responseType?f.response:f.responseText,n={data:o,status:1223===f.status?204:f.status,statusText:1223===f.status?'No Content':f.statusText,headers:t,config:e,request:f};r(c,l,n),f=null}},f.onerror=function(){l(i('Network Error',e)),f=null},f.ontimeout=function(){l(i('timeout of '+e.timeout+'ms exceeded',e,'ECONNABORTED')),f=null},n.isStandardBrowserEnv()){var v=o(31),P=(e.withCredentials||p(e.url))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;P&&(u[e.xsrfHeaderName]=P)}if('setRequestHeader'in f&&n.forEach(u,function(e,t){'undefined'==typeof h&&'content-type'===t.toLowerCase()?delete u[t]:f.setRequestHeader(t,e)}),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(t){if('json'!==f.responseType)throw t}'function'==typeof e.onDownloadProgress&&f.addEventListener('progress',e.onDownloadProgress),'function'==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener('progress',e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){f&&(f.abort(),l(e),f=null)}),void 0===h&&(h=null),f.send(h)})}}).call(t,o(11))},function(e){'use strict';function t(e){this.message=e}t.prototype.toString=function(){return'Cancel'+(this.message?': '+this.message:'')},t.prototype.__CANCEL__=!0,e.exports=t},function(e){'use strict';e.exports=function(e){return!!(e&&e.__CANCEL__)}},function(e,t,o){'use strict';var n=o(25);e.exports=function(e,t,o,r){var a=new Error(e);return n(a,t,o,r)}},function(e){'use strict';e.exports=function(e,t){return function(){for(var o=Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];return e.apply(t,o)}}},function(e,t,o){function n(e){return null===e||e===void 0}function r(e){return e&&'object'==typeof e&&'number'==typeof e.length&&('function'!=typeof e.copy||'function'!=typeof e.slice?!1:0<e.length&&'number'!=typeof e[0]?!1:!0)}function a(e,t,o){var l,i;if(n(e)||n(t))return!1;if(e.prototype!==t.prototype)return!1;if(d(e))return!!d(t)&&(e=s.call(e),t=s.call(t),c(e,t,o));if(r(e)){if(!r(t))return!1;if(e.length!==t.length)return!1;for(l=0;l<e.length;l++)if(e[l]!==t[l])return!1;return!0}try{var h=p(e),u=p(t)}catch(t){return!1}if(h.length!=u.length)return!1;for(h.sort(),u.sort(),l=h.length-1;0<=l;l--)if(h[l]!=u[l])return!1;for(l=h.length-1;0<=l;l--)if(i=h[l],!c(e[i],t[i],o))return!1;return typeof e==typeof t}var s=Array.prototype.slice,p=o(38),d=o(37),c=e.exports=function(e,t,o){return o||(o={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e&&t&&('object'==typeof e||'object'==typeof t)?a(e,t,o):o.strict?e===t:e==t)}},function(e,o,t){function n(e,t){if(''==t)return e;var o={op:'_get',path:t};return r(e,o),o.value}function r(e,r,a,p){if(void 0===a&&(a=!1),void 0===p&&(p=!0),a&&('function'==typeof a?a(r,0,e,r.path):s(r,0)),''===r.path){var i={newDocument:e};if('add'===r.op)return i.newDocument=r.value,i;if('replace'===r.op)return i.newDocument=r.value,i.removed=e,i;if('move'===r.op||'copy'===r.op)return i.newDocument=n(e,r.from),'move'===r.op&&(i.removed=e),i;if('test'===r.op){if(i.test=c(e,r.value),!1===i.test)throw new o.JsonPatchError('Test operation failed','TEST_OPERATION_FAILED',0,r,e);return i.newDocument=e,i}if('remove'===r.op)return i.removed=e,i.newDocument=null,i;if('_get'===r.op)return r.value=e,i;if(a)throw new o.JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902','OPERATION_OP_INVALID',0,r,e);else return i}else{p||(e=l._deepClone(e));var d,f,y,m=r.path||'',g=m.split('/'),b=e,v=1,t=g.length;for(y='function'==typeof a?a:s;;){if(f=g[v],a&&void 0==d&&(void 0===b[f]?d=g.slice(0,v).join('/'):v==t-1&&(d=r.path),void 0!==d&&y(r,0,e,d)),v++,Array.isArray(b)){if('-'===f)f=b.length;else if(a&&!l.isInteger(f))throw new o.JsonPatchError('Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index','OPERATION_PATH_ILLEGAL_ARRAY_INDEX',0,r.path,r);else l.isInteger(f)&&(f=~~f);if(v>=t){if(a&&'add'===r.op&&f>b.length)throw new o.JsonPatchError('The specified index MUST NOT be greater than the number of elements in the array','OPERATION_VALUE_OUT_OF_BOUNDS',0,r.path,r);var i=u[r.op].call(r,b,f,e);if(!1===i.test)throw new o.JsonPatchError('Test operation failed','TEST_OPERATION_FAILED',0,r,e);return i}}else if(f&&-1!=f.indexOf('~')&&(f=l.unescapePathComponent(f)),v>=t){var i=h[r.op].call(r,b,f,e);if(!1===i.test)throw new o.JsonPatchError('Test operation failed','TEST_OPERATION_FAILED',0,r,e);return i}b=b[f]}}}function a(e,t,n){if(n&&!Array.isArray(t))throw new o.JsonPatchError('Patch sequence must be an array','SEQUENCE_NOT_AN_ARRAY');for(var a=Array(t.length),s=0,p=t.length;s<p;s++)a[s]=r(e,t[s],n),e=a[s].newDocument;return a.newDocument=e,a}function s(e,t,n,r){if('object'!=typeof e||null===e||Array.isArray(e))throw new o.JsonPatchError('Operation is not an object','OPERATION_NOT_AN_OBJECT',t,e,n);else if(!h[e.op])throw new o.JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902','OPERATION_OP_INVALID',t,e,n);else if('string'!=typeof e.path)throw new o.JsonPatchError('Operation `path` property is not a string','OPERATION_PATH_INVALID',t,e,n);else if(0!==e.path.indexOf('/')&&0<e.path.length)throw new o.JsonPatchError('Operation `path` property must start with "/"','OPERATION_PATH_INVALID',t,e,n);else if(('move'===e.op||'copy'===e.op)&&'string'!=typeof e.from)throw new o.JsonPatchError('Operation `from` property is not present (applicable in `move` and `copy` operations)','OPERATION_FROM_REQUIRED',t,e,n);else if(('add'===e.op||'replace'===e.op||'test'===e.op)&&e.value===void 0)throw new o.JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)','OPERATION_VALUE_REQUIRED',t,e,n);else if(('add'===e.op||'replace'===e.op||'test'===e.op)&&l.hasUndefined(e.value))throw new o.JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)','OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED',t,e,n);else if(n)if('add'==e.op){var a=e.path.split('/').length,s=r.split('/').length;if(a!==s+1&&a!==s)throw new o.JsonPatchError('Cannot perform an `add` operation at the desired path','OPERATION_PATH_CANNOT_ADD',t,e,n)}else if('replace'===e.op||'remove'===e.op||'_get'===e.op){if(e.path!==r)throw new o.JsonPatchError('Cannot perform the operation at a path that does not exist','OPERATION_PATH_UNRESOLVABLE',t,e,n);}else if('move'===e.op||'copy'===e.op){var i={op:'_get',path:e.from,value:void 0},d=p([i],n);if(d&&'OPERATION_PATH_UNRESOLVABLE'===d.name)throw new o.JsonPatchError('Cannot perform the operation from a path that does not exist','OPERATION_FROM_UNRESOLVABLE',t,e,n)}}function p(e,t,n){try{if(!Array.isArray(e))throw new o.JsonPatchError('Patch sequence must be an array','SEQUENCE_NOT_AN_ARRAY');if(t)a(l._deepClone(t),l._deepClone(e),n||!0);else{n=n||s;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(t){if(t instanceof o.JsonPatchError)return t;throw t}}var i={strict:!0},d=t(9),c=function(e,t){return d(e,t,i)},l=t(3);o.JsonPatchError=l.PatchError,o.deepClone=l._deepClone;var h={add:function(e,t,o){return e[t]=this.value,{newDocument:o}},remove:function(e,t,o){var n=e[t];return delete e[t],{newDocument:o,removed:n}},replace:function(e,t,o){var n=e[t];return e[t]=this.value,{newDocument:o,removed:n}},move:function(e,t,o){var a=n(o,this.path);a&&(a=l._deepClone(a));var s=r(o,{op:'remove',path:this.from}).removed;return r(o,{op:'add',path:this.path,value:s}),{newDocument:o,removed:a}},copy:function(e,t,o){var a=n(o,this.from);return r(o,{op:'add',path:this.path,value:l._deepClone(a)}),{newDocument:o}},test:function(e,t,o){return{newDocument:o,test:c(e[t],this.value)}},_get:function(e,t,o){return this.value=e[t],{newDocument:o}}},u={add:function(e,t,o){return l.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:o,index:t}},remove:function(e,t,o){var n=e.splice(t,1);return{newDocument:o,removed:n[0]}},replace:function(e,t,o){var n=e[t];return e[t]=this.value,{newDocument:o,removed:n}},move:h.move,copy:h.copy,test:h.test,_get:h._get};o.getValueByPointer=n,o.applyOperation=r,o.applyPatch=a,o.applyReducer=function(e,t){var n=r(e,t);if(!1===n.test)throw new o.JsonPatchError('Test operation failed','TEST_OPERATION_FAILED',0,t,e);return n.newDocument},o.validator=s,o.validate=p},function(e){function t(){throw new Error('setTimeout has not been defined')}function o(){throw new Error('clearTimeout has not been defined')}function n(e){if(d===setTimeout)return setTimeout(e,0);if((d===t||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function r(e){if(c===clearTimeout)return clearTimeout(e);if((c===o||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function a(){f&&h&&(f=!1,h.length?u=h.concat(u):y=-1,u.length&&s())}function s(){if(!f){var e=n(a);f=!0;for(var t=u.length;t;){for(h=u,u=[];++y<t;)h&&h[y].run();y=-1,t=u.length}h=null,f=!1,r(e)}}function p(e,t){this.fun=e,this.array=t}function i(){}var d,c,l=e.exports={};(function(){try{d='function'==typeof setTimeout?setTimeout:t}catch(o){d=t}try{c='function'==typeof clearTimeout?clearTimeout:o}catch(t){c=o}})();var h,u=[],f=!1,y=-1;l.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];u.push(new p(e,t)),1!==u.length||f||n(s)},p.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}},function(e,t,o){e.exports=o(20)},function(e,t,o){function n(e){for(var t=0,o=f.length;t<o;t++)if(f[t].obj===e)return f[t]}function r(e,t){for(var o=0,n=e.observers.length;o<n;o++)if(e.observers[o].callback===t)return e.observers[o].observer}function a(e,t){for(var o=0,n=e.observers.length;o<n;o++)if(e.observers[o].observer===t)return void e.observers.splice(o,1)}function s(e){for(var t,o=0,n=f.length;o<n;o++)if(f[o].obj===e.object){t=f[o];break}p(t.value,e.object,e.patches,''),e.patches.length&&l.applyPatch(t.value,e.patches);var r=e.patches;return 0<r.length&&(e.patches=[],e.callback&&e.callback(r)),r}function p(e,o,n,r){if(o!==e){'function'==typeof o.toJSON&&(o=o.toJSON());for(var a=c._objectKeys(o),s=c._objectKeys(e),i=!1,d=!1,l=s.length-1;0<=l;l--){var t=s[l],h=e[t];if(c.hasOwnProperty(o,t)&&(void 0!==o[t]||void 0===h||!1!==Array.isArray(o))){var u=o[t];'object'==typeof h&&null!=h&&'object'==typeof u&&null!=u?p(h,u,n,r+'/'+c.escapePathComponent(t)):h!==u&&(i=!0,n.push({op:'replace',path:r+'/'+c.escapePathComponent(t),value:c._deepClone(u)}))}else n.push({op:'remove',path:r+'/'+c.escapePathComponent(t)}),d=!0}if(d||a.length!=s.length)for(var t,l=0;l<a.length;l++)t=a[l],c.hasOwnProperty(e,t)||void 0===o[t]||n.push({op:'add',path:r+'/'+c.escapePathComponent(t),value:c._deepClone(o[t])})}}var i={strict:!0},d=o(9),c=o(3),l=o(10),h=o(10);t.applyOperation=h.applyOperation,t.applyPatch=h.applyPatch,t.applyReducer=h.applyReducer,t.getValueByPointer=h.getValueByPointer,t.validate=h.validate,t.validator=h.validator;var u=o(3);t.JsonPatchError=u.PatchError,t.deepClone=u._deepClone,t.escapePathComponent=u.escapePathComponent,t.unescapePathComponent=u.unescapePathComponent;var f=[],y=function(){return function(e){this.observers=[],this.obj=e}}(),m=function(){return function(e,t){this.callback=e,this.observer=t}}();t.unobserve=function(e,t){t.unobserve()},t.observe=function(e,t){var o,p=n(e);if(p?o=r(p,t):(p=new y(e),f.push(p)),o)return o;if(o={},p.value=c._deepClone(e),t){o.callback=t,o.next=null;var i=function(){s(o)},d=function(){clearTimeout(o.next),o.next=setTimeout(i)};'undefined'!=typeof window&&(window.addEventListener?(window.addEventListener('mouseup',d),window.addEventListener('keyup',d),window.addEventListener('mousedown',d),window.addEventListener('keydown',d),window.addEventListener('change',d)):(document.documentElement.attachEvent('onmouseup',d),document.documentElement.attachEvent('onkeyup',d),document.documentElement.attachEvent('onmousedown',d),document.documentElement.attachEvent('onkeydown',d),document.documentElement.attachEvent('onchange',d)))}return o.patches=[],o.object=e,o.unobserve=function(){s(o),clearTimeout(o.next),a(p,o),'undefined'!=typeof window&&(window.removeEventListener?(window.removeEventListener('mouseup',d),window.removeEventListener('keyup',d),window.removeEventListener('mousedown',d),window.removeEventListener('keydown',d)):(document.documentElement.detachEvent('onmouseup',d),document.documentElement.detachEvent('onkeyup',d),document.documentElement.detachEvent('onmousedown',d),document.documentElement.detachEvent('onkeydown',d)))},p.observers.push(new m(t,o)),o},t.generate=s,t.compare=function(e,t){var o=[];return p(e,t,o,''),o}},function(e,t,o){if('undefined'==typeof n)var n=o(1).JSONPatchQueue;var r=function(e,t,o,r,a){n.call(this,e,o,r,a),this.transform=t,this.pending=[]};r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.ackLocalVersion=0,r.prototype.send=function(e){var t=e.slice(0);t.unshift({op:'test',path:this.remotePath,value:this.remoteVersion});var o=n.prototype.send.call(this,t);return this.pending.push(o),o},r.prototype.receive=function(e,t){var o=t||this.apply,r=this;return n.prototype.receive.call(this,e,function(e,t){var n=t.slice(0),a=n.shift().value,s=a-r.ackLocalVersion;return r.ackLocalVersion=a,r.pending.splice(0,s),r.pending.length&&(n=r.transform(n,r.pending)),r.obj=o(r.obj,n)})},r.prototype.reset=function(e){return this.ackLocalVersion=n.getPropertyByJsonPointer(e,this.localPath),this.pending=[],this.obj=n.prototype.reset.call(this,e)},e.exports=r,e.exports.default=r,e.exports.__esModule=!0},function(e){var t=function(){function e(e,o,n){var r=e.substr(o.length),a=r.indexOf('/');-1<a||(a=r.length);var s=r.substr(0,a),p=r.substr(a);return t(s)&&s>n?o+(s-1)+p:e}function t(e){var t=~~+e;return t+''===e&&0<=t}var o=!1,n=n||{};n.transform=function(e,t){var o=[];o=o.concat.apply(o,t);var n=JSON.parse(JSON.stringify(e)),a=o.reduce(r,n);return a},n.transformAgainstSingleOp=function(){};var r=function(e,t){if(t.value===void 0&&('add'===t.op||'replace'===t.op||'test'===t.op))throw new Error('\'value\' MUST be defined');if(void 0===t.from&&('copy'===t.op||'move'===t.op))throw new Error('\'from\' MUST be defined');if(!a[t.op]);else if('function'==typeof a[t.op])a[t.op](t,e);else for(var o,n=e.length,r=0;r<n;)o=e[r],r++,!a[t.op][o.op]||a[t.op][o.op](t,o);return e},a={remove:function(n,r){for(var a,s=r.length,p=0;a=r[p];)o,('add'===a.op||'test'===a.op)&&n.path===a.path||(a.from&&(a.from===n.path||0===a.from.indexOf(n.path+'/'))||n.path===a.path||0===a.path.indexOf(n.path+'/'))&&(o,r.splice(p,1),s--,p--),p++;var i=n.path.lastIndexOf('/');if(-1<i){var d=n.path.substr(i+1),c=n.path.substr(0,i+1);if(t(d))for(o,o,s=r.length,p=0;p<s;)a=r[p],p++,0===a.path.indexOf(c)&&(a.path=e(a.path,c,d)),a.from&&0===a.from.indexOf(c)&&(a.from=e(a.from,c,d))}},replace:function(e,t){for(var n,r=0;n=t[r];)o,(n.from&&(n.from===e.path||0===n.from.indexOf(e.path+'/'))||0===n.path.indexOf(e.path+'/'))&&(o,t.splice(r,1),r--),r++}};return n}();e.exports=t,e.exports.default=t,e.exports.__esModule=!0},function(e){'use strict';const t=function(){function e(e){return-1==e.indexOf('/')&&-1==e.indexOf('~')?e:e.replace(/~/g,'~0').replace(/\//g,'~1')}function t(e,t){for(var o=[],n=e.parenthoodMap.get(t);n&&n.path;)o.unshift(n.path),n=e.parenthoodMap.get(n.parent);if(o.length){const e=o.join('/');return'/'+e}return''}function o(o,n,r,a){const s=t(o,n);var p=s+'/'+e(r);{if(o.proxifiedObjectsMap.has(a)){var i=o.proxifiedObjectsMap.get(a);o.parenthoodMap.set(i.originalObject,{parent:n,path:r})}const e=o.proxifiedObjectsMap.get(a);e&&!o.isProxifyingTreeNow&&(e.inherited=!0)}if(a&&'object'==typeof a&&!o.proxifiedObjectsMap.has(a)&&(o.parenthoodMap.set(a,{parent:n,path:r}),a=o._proxifyObjectTreeRecursively(n,a,r)),'undefined'==typeof a){if(n.hasOwnProperty(r)){Array.isArray(n)?o.defaultCallback({op:'replace',path:p,value:null}):o.defaultCallback({op:'remove',path:p});const e=o.proxifiedObjectsMap.get(n[r]);return e&&(o.parenthoodMap.delete(n[r]),o.disableTrapsForProxy(e),o.proxifiedObjectsMap.delete(e)),Reflect.set(n,r,a)}if(!Array.isArray(n))return Reflect.set(n,r,a)}return Array.isArray(n)&&!Number.isInteger(+r.toString())?Reflect.set(n,r,a):n.hasOwnProperty(r)?'undefined'==typeof n[r]?(Array.isArray(n)?o.defaultCallback({op:'replace',path:p,value:a}):o.defaultCallback({op:'add',path:p,value:a}),Reflect.set(n,r,a)):(o.defaultCallback({op:'replace',path:p,value:a}),Reflect.set(n,r,a)):(o.defaultCallback({op:'add',path:p,value:a}),Reflect.set(n,r,a))}function n(o,n,r){if('undefined'!=typeof n[r]){const a=t(o,n),s=a+'/'+e(r);o.defaultCallback({op:'remove',path:s});const p=o.proxifiedObjectsMap.get(n[r]);p&&(p.inherited?p.inherited=!1:(o.parenthoodMap.delete(p.originalObject),o.disableTrapsForProxy(p),o.proxifiedObjectsMap.delete(n[r])))}return Reflect.deleteProperty(n,r)}function r(){this.defaultCallback=(e)=>{this.isRecording&&this.patches.push(e),this.userCallback&&this.userCallback(e)},this.isObserving=!0}function a(){this.defaultCallback=()=>{},this.isObserving=!1}function s(e,t){this.isProxifyingTreeNow=!1,this.isObserving=!1,this.proxifiedObjectsMap=new Map,this.parenthoodMap=new Map,'boolean'!=typeof t&&(t=!0),this.showDetachedWarning=t,this.originalObject=e,this.cachedProxy=null,this.isRecording=!1,this.userCallback,this.resume=r.bind(this),this.pause=a.bind(this)}return s.deepClone=function(e){switch(typeof e){case'object':return JSON.parse(JSON.stringify(e));case'undefined':return null;default:return e;}},s.escapePathComponent=e,s.prototype.generateProxyAtPath=function(e,t,r){if(!t)return t;const a=this,s={set:(e,t,n,r)=>o(a,e,t,n,r),deleteProperty:(e,t)=>n(a,e,t)},p=Proxy.revocable(t,s);return p.trapsInstance=s,p.originalObject=t,this.parenthoodMap.set(t,{parent:e,path:r}),this.proxifiedObjectsMap.set(p.proxy,p),p.proxy},s.prototype._proxifyObjectTreeRecursively=function(t,o,n){for(let r in o)o.hasOwnProperty(r)&&o[r]instanceof Object&&(o[r]=this._proxifyObjectTreeRecursively(o,o[r],e(r)));return this.generateProxyAtPath(t,o,n)},s.prototype.proxifyObjectTree=function(e){this.pause(),this.isProxifyingTreeNow=!0;const t=this._proxifyObjectTreeRecursively(void 0,e,'');return this.isProxifyingTreeNow=!1,this.resume(),t},s.prototype.disableTrapsForProxy=function(e){if(this.showDetachedWarning){const t='You\'re accessing an object that is detached from the observedObject tree, see https://github.com/Palindrom/JSONPatcherProxy#detached-objects';e.trapsInstance.set=(e,o,n)=>{return console.warn(t),Reflect.set(e,o,n)},e.trapsInstance.set=(e,o,n)=>{return console.warn(t),Reflect.set(e,o,n)},e.trapsInstance.deleteProperty=(e,t)=>{return Reflect.deleteProperty(e,t)}}else delete e.trapsInstance.set,delete e.trapsInstance.get,delete e.trapsInstance.deleteProperty},s.prototype.observe=function(e,t){if(!e&&!t)throw new Error('You need to either record changes or pass a callback');return this.isRecording=e,this.userCallback=t,e&&(this.patches=[]),this.cachedProxy=this.proxifyObjectTree(this.originalObject),this.cachedProxy},s.prototype.generate=function(){if(!this.isRecording)throw new Error('You should set record to true to get patches later');return this.patches.splice(0,this.patches.length)},s.prototype.revoke=function(){this.proxifiedObjectsMap.forEach((e)=>{e.revoke()})},s.prototype.disableTraps=function(){this.proxifiedObjectsMap.forEach(this.disableTrapsForProxy,this)},s}();e.exports=t,e.exports.default=t},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(o){'object'==typeof window&&(t=window)}e.exports=t},function(e){e.exports=URL},function(e){e.exports=WebSocket},function(e,t,o){'use strict';function n(e){var t=new s(e),o=a(s.prototype.request,t);return r.extend(o,s.prototype,t),r.extend(o,t),o}var r=o(0),a=o(8),s=o(22),p=o(2),i=n(p);i.Axios=s,i.create=function(e){return n(r.merge(p,e))},i.Cancel=o(5),i.CancelToken=o(21),i.isCancel=o(6),i.all=function(e){return Promise.all(e)},i.spread=o(36),e.exports=i,e.exports.default=i},function(e,t,o){'use strict';function n(e){if('function'!=typeof e)throw new TypeError('executor must be a function.');var t;this.promise=new Promise(function(e){t=e});var o=this;e(function(e){o.reason||(o.reason=new r(e),t(o.reason))})}var r=o(5);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e,t=new n(function(t){e=t});return{token:t,cancel:e}},e.exports=n},function(e,t,o){'use strict';function n(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var r=o(2),a=o(0),s=o(23),p=o(24),i=o(32),d=o(30);n.prototype.request=function(e){'string'==typeof e&&(e=a.merge({url:arguments[0]},arguments[1])),e=a.merge(r,this.defaults,{method:'get'},e),e.baseURL&&!i(e.url)&&(e.url=d(e.baseURL,e.url));var t=[p,void 0],o=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)o=o.then(t.shift(),t.shift());return o},a.forEach(['delete','get','head'],function(e){n.prototype[e]=function(t,o){return this.request(a.merge(o||{},{method:e,url:t}))}}),a.forEach(['post','put','patch'],function(e){n.prototype[e]=function(t,o,n){return this.request(a.merge(n||{},{method:e,url:t,data:o}))}}),e.exports=n},function(e,t,o){'use strict';function n(){this.handlers=[]}var r=o(0);n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=n},function(e,t,o){'use strict';function n(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var r=o(0),a=o(27),s=o(6),p=o(2);e.exports=function(e){n(e),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(['delete','get','head','post','put','patch','common'],function(t){delete e.headers[t]});var t=e.adapter||p.adapter;return t(e).then(function(t){return n(e),t.data=a(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(n(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e){'use strict';e.exports=function(e,t,o,n){return e.config=t,o&&(e.code=o),e.response=n,e}},function(e,t,o){'use strict';var n=o(7);e.exports=function(e,t,o){var r=o.config.validateStatus;o.status&&r&&!r(o.status)?t(n('Request failed with status code '+o.status,o.config,null,o)):e(o)}},function(e,t,o){'use strict';var n=o(0);e.exports=function(e,t,o){return n.forEach(o,function(o){e=o(e,t)}),e}},function(e){'use strict';function t(){this.message='String contains an invalid character'}t.prototype=new Error,t.prototype.code=5,t.prototype.name='InvalidCharacterError',e.exports=function(e){for(var o,n,r=e+'',a='',s=0,p='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';r.charAt(0|s)||(p='=',s%1);a+=p.charAt(63&o>>8-8*(s%1))){if(n=r.charCodeAt(s+=3/4),255<n)throw new t;o=o<<8|n}return a}},function(e,t,o){'use strict';function n(e){return encodeURIComponent(e).replace(/%40/gi,'@').replace(/%3A/gi,':').replace(/%24/g,'$').replace(/%2C/gi,',').replace(/%20/g,'+').replace(/%5B/gi,'[').replace(/%5D/gi,']')}var r=o(0);e.exports=function(e,t,o){if(!t)return e;var a;if(o)a=o(t);else if(r.isURLSearchParams(t))a=t.toString();else{var s=[];r.forEach(t,function(e,t){null===e||'undefined'==typeof e||(r.isArray(e)&&(t+='[]'),!r.isArray(e)&&(e=[e]),r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(n(t)+'='+n(e))}))}),a=s.join('&')}return a&&(e+=(-1===e.indexOf('?')?'?':'&')+a),e}},function(e){'use strict';e.exports=function(e,t){return e.replace(/\/+$/,'')+'/'+t.replace(/^\/+/,'')}},function(e,t,o){'use strict';var n=o(0);e.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,o,r,a,s){var p=[];p.push(e+'='+encodeURIComponent(t)),n.isNumber(o)&&p.push('expires='+new Date(o).toGMTString()),n.isString(r)&&p.push('path='+r),n.isString(a)&&p.push('domain='+a),!0===s&&p.push('secure'),document.cookie=p.join('; ')},read:function(e){var t=document.cookie.match(new RegExp('(^|;\\s*)('+e+')=([^;]*)'));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,'',Date.now()-8.64e7)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e){'use strict';e.exports=function(e){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,o){'use strict';var n=o(0);e.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return o&&(r.setAttribute('href',t),t=r.href),r.setAttribute('href',t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,''):'',host:r.host,search:r.search?r.search.replace(/^\?/,''):'',hash:r.hash?r.hash.replace(/^#/,''):'',hostname:r.hostname,port:r.port,pathname:'/'===r.pathname.charAt(0)?r.pathname:'/'+r.pathname}}var t,o=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement('a');return t=e(window.location.href),function(o){var r=n.isString(o)?e(o):o;return r.protocol===t.protocol&&r.host===t.host}}():function(){return function(){return!0}}()},function(e,t,o){'use strict';var n=o(0);e.exports=function(e,t){n.forEach(e,function(o,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=o,delete e[n])})}},function(e,t,o){'use strict';var n=o(0);e.exports=function(e){var t,o,r,a={};return e?(n.forEach(e.split('\n'),function(e){r=e.indexOf(':'),t=n.trim(e.substr(0,r)).toLowerCase(),o=n.trim(e.substr(r+1)),t&&(a[t]=a[t]?a[t]+', '+o:o)}),a):a}},function(e){'use strict';e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){function o(e){return'[object Arguments]'==Object.prototype.toString.call(e)}function n(e){return e&&'object'==typeof e&&'number'==typeof e.length&&Object.prototype.hasOwnProperty.call(e,'callee')&&!Object.prototype.propertyIsEnumerable.call(e,'callee')||!1}var r='[object Arguments]'==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=r?o:n,t.supported=o;t.unsupported=n},function(e,t){function o(e){var t=[];for(var o in e)t.push(o);return t}t=e.exports='function'==typeof Object.keys?Object.keys:o,t.shim=o},function(e){var t=function(e,t,o,n){this.obj=e,this.waiting=[],this.versionPath=t,this.apply=o,this.purist=n};t.prototype.version=0,t.prototype.receive=function(e,t){var o=t||this.apply,n=e.slice(0);if(this.purist)n.shift();var r=n.shift(),a=r.value;if(a<=this.version)throw new Error('Given version was already applied.');else if(a==this.version+1)for(;n;)this.version++,this.obj=o(this.obj,n),n=this.waiting.shift();else this.waiting[a-this.version-2]=n},t.prototype.send=function(e){this.version++;var t=e.slice(0);return t.unshift({op:'replace',path:this.versionPath,value:this.version}),this.purist&&t.unshift({op:'test',path:this.versionPath,value:this.version-1}),t},t.getPropertyByJsonPointer=function(e,t){var o=t.split('/');''===o[0]&&o.shift();for(var n=e;o.length;){var r=o.shift().replace('~1','/').replace('~0','~');o.length&&(n=n[r])}return n[r]},t.prototype.reset=function(e){this.version=t.getPropertyByJsonPointer(e,this.versionPath),this.waiting=[];return this.obj=this.apply(this.obj,[{op:'replace',path:'',value:e}])},e.exports=t,e.exports.default=t,e.exports.__esModule=!0},function(e){var t=function(e,t,o,n){this.obj=e,this.waiting=[],this.localPath=t[0],this.remotePath=t[1],this.apply=o,this.purist=n};t.prototype.localVersion=0,t.prototype.remoteVersion=0,t.prototype.receive=function(e,t){var o=t||this.apply,n=e.slice(0);if(this.purist)n.shift();var r=n.shift(),a=r.value;if(a<=this.remoteVersion)throw new Error('Given version was already applied.');else if(a==this.remoteVersion+1)for(;n;)this.remoteVersion++,this.obj=o(this.obj,n),n=this.waiting.shift();else this.waiting[a-this.remoteVersion-2]=n},t.prototype.send=function(e){this.localVersion++;var t=e.slice(0);return this.purist?t.unshift({op:'test',path:this.localPath,value:this.localVersion-1},{op:'replace',path:this.localPath,value:this.localVersion}):t.unshift({op:'replace',path:this.localPath,value:this.localVersion}),t},t.getPropertyByJsonPointer=function(e,t){var o=t.split('/');''===o[0]&&o.shift();for(var n=e;o.length;){var r=o.shift().replace('~1','/').replace('~0','~');o.length&&(n=n[r])}return n[r]},t.prototype.reset=function(e){this.remoteVersion=t.getPropertyByJsonPointer(e,this.remotePath),this.waiting=[];return this.obj=this.apply(this.obj,[{op:'replace',path:'',value:e}])},e.exports=t,e.exports.default=t,e.exports.__esModule=!0},function(e,t,o){(function(t){var{applyPatch:n,validate:r}=o(13),a=o(16),s=o(1).JSONPatchQueueSynchronous,p=o(1).JSONPatchQueue,i=o(15),d=o(14),c=o(18),l=o(12),h=o(19).w3cwebsocket;if(!t.WebSocket&&h)var u=h;else if(t.WebSocket)var u=t.WebSocket;var f=function(){function e(e){return e.replace(/^http/i,'ws')}function t(e,t,o){function n(){r=i,a=0,s=!1,clearTimeout(p),p=null}var r,a,s,p,i=1e3,d=function(){0==a?(t(0),s=!1,r*=2,e()):(t(a),a-=1e3,setTimeout(d,1e3))};this.triggerReconnection=function(){s||(a=r,s=!0,d())},this.reconnectNow=function(){a=0,r=i},this.stopReconnecting=function(){n(),o()},n()}function o(e,t,o,n){var r,a;this.start=function(){r||(r=setTimeout(function(){this.notifySend(),e()}.bind(this),o))},this.notifySend=function(){clearTimeout(r),r=null,a||(a=setTimeout(function(){a=null,t()}.bind(this),n))},this.notifyReceive=function(){clearTimeout(a),a=null,this.start()},this.stop=function(){clearTimeout(r),r=null,clearTimeout(a),a=null}}function h(){this.start=this.stop=this.notifySend=this.notifyReceive=function(){}}function f(t,o,n,r,a,s,p,i,d){this.palindrom=t,this.remoteUrl='undefined'!=typeof window&&window.location?new c(o,window.location.href):new c(o),r&&(this.onReceive=r),a&&(this.onSend=a),s&&(this.onConnectionError=s),i&&(this.onFatalError=i),d&&(this.onStateChange=d),p&&(this.onSocketOpened=p);var l=this;Object.defineProperty(this,'useWebSocket',{get:function(){return n},set:function(t){return n=t,!1==t?l._ws&&(l._ws.onclose=function(){l._ws=null},l._ws.close()):!l.wsUrl&&(l.wsUrl=e(l.remoteUrl.href)),n}})}function y(e,t,o,n){return e.xhr(t,'application/json',o,function(t){n(t.data),e.useWebSocket&&e.webSocketUpgrade(e.onSocketOpened)})}function m(e){e._ws&&(e._ws.onclose=function(){},e._ws.close(),e._ws=null)}function g(e,t){this.obj=e,this.apply=t}function b(e,t){e.heartbeat.stop(),t(function(t){e.reconnector.stopReconnecting(),e.debug&&(e.remoteObj=JSON.parse(JSON.stringify(t))),e.queue.reset(t),e.heartbeat.start()})}function v(e){b(e,e.network.establish.bind(e.network))}function P(e){b(e,function(t){e.network.reestablish(e.queue.pending,t)})}function E(e){if('object'!=typeof e)throw new Error('Palindrom constructor requires an object argument.');if(!e.remoteUrl)throw new Error('remoteUrl is required');if(e.ignoreAdd)throw new TypeError('Palindrom: `ignoreAdd` is removed in favour of local state objects. see https://github.com/Palindrom/Palindrom/issues/136');Object.defineProperty(this,'ignoreAdd',{set:function(){throw new TypeError('Palindrom: Can\'t set `ignoreAdd`, it is removed in favour of local state objects. see https://github.com/Palindrom/Palindrom/issues/136')}}),this.debug=void 0==e.debug||e.debug;var n=function(){};if(this.isObserving=!1,this.onLocalChange=e.onLocalChange||n,this.onRemoteChange=e.onRemoteChange||n,this.onStateReset=e.onStateReset||e.callback||n,this.filterLocalChange=e.filterLocalChange||((e)=>e),e.callback&&console.warn('Palindrom: options.callback is deprecated. Please use `onStateReset` instead'),this.onPatchReceived=e.onPatchReceived||n,this.onPatchSent=e.onPatchSent||n,this.onSocketStateChanged=e.onSocketStateChanged||n,this.onConnectionError=e.onConnectionError||n,this.retransmissionThreshold=e.retransmissionThreshold||3,this.onReconnectionCountdown=e.onReconnectionCountdown||n,this.onReconnectionEnd=e.onReconnectionEnd||n,this.onSocketOpened=e.onSocketOpened||n,this.onIncomingPatchValidationError=e.onIncomingPatchValidationError||n,this.onOutgoingPatchValidationError=e.onOutgoingPatchValidationError||n,this.reconnector=new t(function(){P(this)}.bind(this),this.onReconnectionCountdown,this.onReconnectionEnd),e.pingIntervalS){const t=1e3*e.pingIntervalS;this.heartbeat=new o(this.ping.bind(this),this.handleConnectionError.bind(this),t,t)}else this.heartbeat=new h;this.network=new f(this,e.remoteUrl,e.useWebSocket||!1,this.handleRemoteChange.bind(this),this.onPatchSent.bind(this),this.handleConnectionError.bind(this),this.onSocketOpened.bind(this),this.handleFatalError.bind(this),this.onSocketStateChanged.bind(this)),Object.defineProperty(this,'useWebSocket',{get:function(){return this.network.useWebSocket},set:function(e){this.network.useWebSocket=e}}),this.OTPatchIndexOffset=0,e.localVersionPath?e.remoteVersionPath?(this.OTPatchIndexOffset=2,this.queue=e.ot?new d(this.obj,i.transform,[e.localVersionPath,e.remoteVersionPath],this.validateAndApplySequence.bind(this),e.purity):new p(this.obj,[e.localVersionPath,e.remoteVersionPath],this.validateAndApplySequence.bind(this),e.purity)):(this.OTPatchIndexOffset=1,this.queue=new s(this.obj,e.localVersionPath,this.validateAndApplySequence.bind(this),e.purity)):this.queue=new g(this.obj,this.validateAndApplySequence.bind(this)),v(this)}function O(e,t){e.network.validateNumericsRangesInPatch(t,'outgoing');var o=JSON.stringify(t);e.unobserve(),e.heartbeat.notifySend(),e.network.send(o),e.observe()}if('undefined'==typeof x)if('undefined'!=typeof window)var x=window;else var x={};return f.prototype.findRangeErrors=function(e,t){var o=typeof e;if('object'==o)for(var n in e)e.hasOwnProperty(n)&&this.findRangeErrors(e[n],t);else'number'==o&&(9007199254740991<e||-9007199254740991>e)&&('outgoing'===t?this.palindrom.onOutgoingPatchValidationError(new RangeError(`A number that is either bigger than Number.MAX_INTEGER_VALUE or smaller than Number.MIN_INTEGER_VALUE has been encountered in an ${t} patch, value is ${e}`)):this.palindrom.onIncomingPatchValidationError(new RangeError(`A number that is either bigger than Number.MAX_INTEGER_VALUE or smaller than Number.MIN_INTEGER_VALUE has been encountered in an ${t} patch, value is: ${e}`)))},f.prototype.validateNumericsRangesInPatch=function(e,t,o=this.palindrom.OTPatchIndexOffset){for(let n=o,r=e.length;n<r;n++)this.findRangeErrors(e[0].value,t)},f.prototype.establish=function(e){y(this,this.remoteUrl.href,null,e)},f.prototype.reestablish=function(e,t){y(this,this.remoteUrl.href+'/reconnect',JSON.stringify(e),t)},f.prototype.send=function(e){var t=this;if(this.useWebSocket&&this._ws&&1===this._ws.readyState)this._ws.send(e),t.onSend(e,t._ws.url,'WS');else{var o=this.remoteUrl.href;this.xhr(o,'application/json-patch+json',e,function(e,n){t.onReceive(e.data,o,n)})}return this},f.prototype.onReceive=function(){},f.prototype.onSend=function(){},f.prototype.onStateChange=function(){},f.prototype.upgrade=function(){},f.prototype.webSocketUpgrade=function(t){var o=this;this.wsUrl=e(this.remoteUrl.href);var n=this.wsUrl;m(o),o._ws=new u(n),o._ws.onopen=function(e){o.onStateChange(o._ws.readyState,n),t&&t(e)},o._ws.onmessage=function(e){const t=JSON.parse(e.data);o.validateNumericsRangesInPatch(t,'incoming'),o.onReceive(t,o._ws.url,'WS')},o._ws.onerror=function(e){if(o.onStateChange(o._ws.readyState,n,e.data),!!o.useWebSocket){var t={statusText:'WebSocket connection could not be made.',readyState:o._ws.readyState,url:n};o.onFatalError(t,n,'WS')}},o._ws.onclose=function(e){o.onStateChange(o._ws.readyState,n,null,e.code,e.reason);var t={statusText:'WebSocket connection closed.',readyState:o._ws.readyState,url:n,statusCode:e.code,reason:e.reason};e.reason?o.onFatalError(t,n,'WS'):o.onConnectionError()}},f.prototype.getPatchUsingHTTP=function(e){return this.xhr(e,'application/json-patch+json',null,(t,o)=>{this.validateNumericsRangesInPatch(t.data,'incoming'),this.onReceive(t.data,e,o)},!0)},f.prototype.changeState=function(e){return console.warn('Palindrom: changeState was renamed to `getPatchUsingHTTP`, and they\'re both not recommended to use, please use `PalindromDOM.morphUrl` instead'),this.getPatchUsingHTTP(e)},f.prototype.setRemoteUrl=function(e){if(this.remoteUrlSet&&this.remoteUrl&&this.remoteUrl!=e)throw new Error('Session lost. Server replied with a different session ID that was already set. \nPossibly a server restart happened while you were working. \nPlease reload the page.\n\nPrevious session ID: '+this.remoteUrl+'\nNew session ID: '+e);this.remoteUrlSet=!0,this.remoteUrl=new c(e,this.remoteUrl.href)},f.prototype.handleResponseHeader=function(e){var t=e.headers&&(e.headers['x-location']||e.headers.location);t&&this.setRemoteUrl(t)},f.prototype.xhr=function(e,t,o,n,r){const a=o?'PATCH':'GET',s={},p=this;var i;o&&(s['Content-Type']='application/json-patch+json'),t&&(s.Accept=t),this.remoteUrl&&r&&(s['X-Referer']=this.remoteUrl.pathname),i='GET'==a?l.get(e,{headers:s}):l.patch(e,o,{headers:s}),i.then(function(e){p.handleResponseHeader(e),p.findRangeErrors(e.data,'incoming'),n&&n.call(p.palindrom,e,a)}).catch(function(t){const o=t.response;if(o&&p.onFatalError({statusCode:o.status,statusText:o.statusText,reason:o.data},e,a),!o)throw t}),this.onSend(o,e,a)},g.prototype.send=function(e){return e},g.prototype.receive=function(e){return this.obj=this.apply(this.obj,e)},g.prototype.reset=function(e){return this.obj=this.apply(this.obj,[{op:'replace',path:'',value:e}])},E.prototype.ping=function(){O(this,[])},E.prototype.prepareProxifiedObject=function(e){e||(e={}),this.jsonPatcherProxy=new a(e);const t=this.jsonPatcherProxy.observe(!1,(e)=>{const t=this.filterLocalChange(e);t&&this.handleLocalChange(t)});Object.defineProperty(this,'obj',{get:function(){return t},set:function(){throw new Error('palindrom.obj is readonly')},configurable:!0}),this.isObserving=!0},E.prototype.observe=function(){this.jsonPatcherProxy&&this.jsonPatcherProxy.resume(),this.isObserving=!0},E.prototype.unobserve=function(){this.jsonPatcherProxy&&this.jsonPatcherProxy.pause(),this.isObserving=!1},E.prototype.handleLocalChange=function(e){const t=[e];this.debug&&this.validateSequence(this.remoteObj,t),O(this,this.queue.send(t)),this.onLocalChange(t)},E.prototype.validateAndApplySequence=function(e,t){try{this.unobserve();var o=n(e,t,this.debug);this.observe(),o.newDocument!==e&&(this.prepareProxifiedObject(o.newDocument),this.queue.obj=this.obj,this.onStateReset(this.obj)),this.onRemoteChange(t,o)}catch(e){if(this.debug)return void this.onIncomingPatchValidationError(e);throw e}return this.obj},E.prototype.validateSequence=function(e,t){var o=r(t,e);o&&this.onOutgoingPatchValidationError(o)},E.prototype.handleConnectionError=function(){this.heartbeat.stop(),this.reconnector.triggerReconnection()},E.prototype.handleFatalError=function(e,t,o){this.heartbeat.stop(),this.reconnector.stopReconnecting(),this.onConnectionError&&this.onConnectionError(e,t,o)},E.prototype.reconnectNow=function(){this.reconnector.reconnectNow()},E.prototype.showWarning=function(e,t){this.debug&&x.console&&console.warn&&(t&&(e+=' ('+t+')'),console.warn('Palindrom warning: '+e))},E.prototype.handleRemoteChange=function(e,t,o){this.heartbeat.notifyReceive();var n=e||[];0!==n.length&&(this.onPatchReceived&&this.onPatchReceived(e,t,o),this.isObserving&&(this.queue.receive(n),this.queue.pending&&this.queue.pending.length&&this.queue.pending.length>this.retransmissionThreshold&&this.queue.pending.forEach(O.bind(null,this)),this.debug&&(this.remoteObj=JSON.parse(JSON.stringify(this.obj)))))},x.Puppet=E,E}();e.exports=f,e.exports.default=f,e.exports.__esModule=!0}).call(t,o(17))}]);
=======
var Palindrom=function(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(o,'a',o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=41)}([function(e,t,o){'use strict';function r(e){return'[object Array]'===d.call(e)}function n(e){return null!==e&&'object'==typeof e}function a(e){return'[object Function]'===d.call(e)}function s(e,t){if(null!==e&&'undefined'!=typeof e)if('object'==typeof e||r(e)||(e=[e]),r(e))for(var o=0,n=e.length;o<n;o++)t.call(null,e[o],o,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function p(){function e(e,o){t[o]='object'==typeof t[o]&&'object'==typeof e?p(t[o],e):e}for(var t={},o=0,r=arguments.length;o<r;o++)s(arguments[o],e);return t}var i=o(8),d=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:function(e){return'[object ArrayBuffer]'===d.call(e)},isFormData:function(e){return'undefined'!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){var t;return t='undefined'!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t},isString:function(e){return'string'==typeof e},isNumber:function(e){return'number'==typeof e},isObject:n,isUndefined:function(e){return'undefined'==typeof e},isDate:function(e){return'[object Date]'===d.call(e)},isFile:function(e){return'[object File]'===d.call(e)},isBlob:function(e){return'[object Blob]'===d.call(e)},isFunction:a,isStream:function(e){return n(e)&&a(e.pipe)},isURLSearchParams:function(e){return'undefined'!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return'undefined'!=typeof window&&'undefined'!=typeof document&&'function'==typeof document.createElement},forEach:s,merge:p,extend:function(e,t,o){return s(t,function(t,r){e[r]=o&&'function'==typeof t?i(t,o):t}),e},trim:function(e){return e.replace(/^\s*/,'').replace(/\s*$/,'')}}},function(e,t,o){var r=o(40),n=o(39);e.exports={JSONPatchQueue:r,JSONPatchQueueSynchronous:n,__esModule:!0}},function(e,t,o){'use strict';(function(t){function r(e,t){!n.isUndefined(e)&&n.isUndefined(e['Content-Type'])&&(e['Content-Type']=t)}var n=o(0),a=o(34),s=/^\)\]\}',?\n/,p={"Content-Type":'application/x-www-form-urlencoded'},i={adapter:function(){var e;return'undefined'==typeof XMLHttpRequest?'undefined'!=typeof t&&(e=o(4)):e=o(4),e}(),transformRequest:[function(e,t){return a(t,'Content-Type'),n.isFormData(e)||n.isArrayBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(r(t,'application/x-www-form-urlencoded;charset=utf-8'),e.toString()):n.isObject(e)?(r(t,'application/json;charset=utf-8'),JSON.stringify(e)):e}],transformResponse:[function(e){if('string'==typeof e){e=e.replace(s,'');try{e=JSON.parse(e)}catch(t){}}return e}],timeout:0,xsrfCookieName:'XSRF-TOKEN',xsrfHeaderName:'X-XSRF-TOKEN',maxContentLength:-1,validateStatus:function(e){return 200<=e&&300>e}};i.headers={common:{Accept:'application/json, text/plain, */*'}},n.forEach(['delete','get','head'],function(e){i.headers[e]={}}),n.forEach(['post','put','patch'],function(e){i.headers[e]=n.merge(p)}),e.exports=i}).call(t,o(11))},function(e,t){function o(e,t){return i.call(e,t)}function r(e){if(Array.isArray(e)){for(var t=Array(e.length),r=0;r<t.length;r++)t[r]=''+r;return t}if(Object.keys)return Object.keys(e);var t=[];for(var n in e)o(e,n)&&t.push(n);return t}function n(e){return-1===e.indexOf('/')&&-1===e.indexOf('~')?e:e.replace(/~/g,'~0').replace(/\//g,'~1')}function a(e,t){var r;for(var s in e)if(o(e,s)){if(e[s]===t)return n(s)+'/';if('object'==typeof e[s]&&(r=a(e[s],t),''!=r))return n(s)+'/'+r}return''}function s(e){if(e===void 0)return!0;if(e)if(Array.isArray(e)){for(var t=0,o=e.length;t<o;t++)if(s(e[t]))return!0;}else if('object'==typeof e)for(var n=r(e),a=n.length,t=0;t<a;t++)if(s(e[n[t]]))return!0;return!1}var p=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=Object.prototype.hasOwnProperty;t.hasOwnProperty=o,t._objectKeys=r;t._deepClone=function(e){switch(typeof e){case'object':return JSON.parse(JSON.stringify(e));case'undefined':return null;default:return e;}},t.isInteger=function(e){for(var t,o=0,r=e.length;o<r;){if(t=e.charCodeAt(o),48<=t&&57>=t){o++;continue}return!1}return!0},t.escapePathComponent=n,t.unescapePathComponent=function(e){return e.replace(/~1/g,'/').replace(/~0/g,'~')},t._getPathRecursive=a,t.getPath=function(e,t){if(e===t)return'/';var o=a(e,t);if(''===o)throw new Error('Object not found in root');return'/'+o},t.hasUndefined=s;var d=function(e){function t(t,o,r,n,a){e.call(this,t),this.message=t,this.name=o,this.index=r,this.operation=n,this.tree=a}return p(t,e),t}(Error);t.PatchError=d},function(e,t,o){'use strict';(function(t){var r=o(0),n=o(26),a=o(29),s=o(35),p=o(33),i=o(7),d='undefined'!=typeof window&&window.btoa&&window.btoa.bind(window)||o(28);e.exports=function(e){return new Promise(function(c,l){var h=e.data,u=e.headers;r.isFormData(h)&&delete u['Content-Type'];var f=new XMLHttpRequest,y='onreadystatechange',m=!1;if('test'===t.env.NODE_ENV||'undefined'==typeof window||!window.XDomainRequest||'withCredentials'in f||p(e.url)||(f=new window.XDomainRequest,y='onload',m=!0,f.onprogress=function(){},f.ontimeout=function(){}),e.auth){var g=e.auth.username||'',b=e.auth.password||'';u.Authorization='Basic '+d(g+':'+b)}if(f.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f[y]=function(){if(f&&(4===f.readyState||m)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf('file:'))){var t='getAllResponseHeaders'in f?s(f.getAllResponseHeaders()):null,o=e.responseType&&'text'!==e.responseType?f.response:f.responseText,r={data:o,status:1223===f.status?204:f.status,statusText:1223===f.status?'No Content':f.statusText,headers:t,config:e,request:f};n(c,l,r),f=null}},f.onerror=function(){l(i('Network Error',e)),f=null},f.ontimeout=function(){l(i('timeout of '+e.timeout+'ms exceeded',e,'ECONNABORTED')),f=null},r.isStandardBrowserEnv()){var v=o(31),P=(e.withCredentials||p(e.url))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;P&&(u[e.xsrfHeaderName]=P)}if('setRequestHeader'in f&&r.forEach(u,function(e,t){'undefined'==typeof h&&'content-type'===t.toLowerCase()?delete u[t]:f.setRequestHeader(t,e)}),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(t){if('json'!==f.responseType)throw t}'function'==typeof e.onDownloadProgress&&f.addEventListener('progress',e.onDownloadProgress),'function'==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener('progress',e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){f&&(f.abort(),l(e),f=null)}),void 0===h&&(h=null),f.send(h)})}}).call(t,o(11))},function(e){'use strict';function t(e){this.message=e}t.prototype.toString=function(){return'Cancel'+(this.message?': '+this.message:'')},t.prototype.__CANCEL__=!0,e.exports=t},function(e){'use strict';e.exports=function(e){return!!(e&&e.__CANCEL__)}},function(e,t,o){'use strict';var r=o(25);e.exports=function(e,t,o,n){var a=new Error(e);return r(a,t,o,n)}},function(e){'use strict';e.exports=function(e,t){return function(){for(var o=Array(arguments.length),r=0;r<o.length;r++)o[r]=arguments[r];return e.apply(t,o)}}},function(e,t,o){function r(e){return null===e||e===void 0}function n(e){return e&&'object'==typeof e&&'number'==typeof e.length&&('function'!=typeof e.copy||'function'!=typeof e.slice?!1:0<e.length&&'number'!=typeof e[0]?!1:!0)}function a(e,t,o){var l,i;if(r(e)||r(t))return!1;if(e.prototype!==t.prototype)return!1;if(d(e))return!!d(t)&&(e=s.call(e),t=s.call(t),c(e,t,o));if(n(e)){if(!n(t))return!1;if(e.length!==t.length)return!1;for(l=0;l<e.length;l++)if(e[l]!==t[l])return!1;return!0}try{var h=p(e),u=p(t)}catch(t){return!1}if(h.length!=u.length)return!1;for(h.sort(),u.sort(),l=h.length-1;0<=l;l--)if(h[l]!=u[l])return!1;for(l=h.length-1;0<=l;l--)if(i=h[l],!c(e[i],t[i],o))return!1;return typeof e==typeof t}var s=Array.prototype.slice,p=o(38),d=o(37),c=e.exports=function(e,t,o){return o||(o={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e&&t&&('object'==typeof e||'object'==typeof t)?a(e,t,o):o.strict?e===t:e==t)}},function(e,o,t){function r(e,t){if(''==t)return e;var o={op:'_get',path:t};return n(e,o),o.value}function n(e,n,a,p){if(void 0===a&&(a=!1),void 0===p&&(p=!0),a&&('function'==typeof a?a(n,0,e,n.path):s(n,0)),''===n.path){var i={newDocument:e};if('add'===n.op)return i.newDocument=n.value,i;if('replace'===n.op)return i.newDocument=n.value,i.removed=e,i;if('move'===n.op||'copy'===n.op)return i.newDocument=r(e,n.from),'move'===n.op&&(i.removed=e),i;if('test'===n.op){if(i.test=c(e,n.value),!1===i.test)throw new o.JsonPatchError('Test operation failed','TEST_OPERATION_FAILED',0,n,e);return i.newDocument=e,i}if('remove'===n.op)return i.removed=e,i.newDocument=null,i;if('_get'===n.op)return n.value=e,i;if(a)throw new o.JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902','OPERATION_OP_INVALID',0,n,e);else return i}else{p||(e=l._deepClone(e));var d,f,y,m=n.path||'',g=m.split('/'),b=e,v=1,t=g.length;for(y='function'==typeof a?a:s;;){if(f=g[v],a&&void 0==d&&(void 0===b[f]?d=g.slice(0,v).join('/'):v==t-1&&(d=n.path),void 0!==d&&y(n,0,e,d)),v++,Array.isArray(b)){if('-'===f)f=b.length;else if(a&&!l.isInteger(f))throw new o.JsonPatchError('Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index','OPERATION_PATH_ILLEGAL_ARRAY_INDEX',0,n.path,n);else l.isInteger(f)&&(f=~~f);if(v>=t){if(a&&'add'===n.op&&f>b.length)throw new o.JsonPatchError('The specified index MUST NOT be greater than the number of elements in the array','OPERATION_VALUE_OUT_OF_BOUNDS',0,n.path,n);var i=u[n.op].call(n,b,f,e);if(!1===i.test)throw new o.JsonPatchError('Test operation failed','TEST_OPERATION_FAILED',0,n,e);return i}}else if(f&&-1!=f.indexOf('~')&&(f=l.unescapePathComponent(f)),v>=t){var i=h[n.op].call(n,b,f,e);if(!1===i.test)throw new o.JsonPatchError('Test operation failed','TEST_OPERATION_FAILED',0,n,e);return i}b=b[f]}}}function a(e,t,r){if(r&&!Array.isArray(t))throw new o.JsonPatchError('Patch sequence must be an array','SEQUENCE_NOT_AN_ARRAY');for(var a=Array(t.length),s=0,p=t.length;s<p;s++)a[s]=n(e,t[s],r),e=a[s].newDocument;return a.newDocument=e,a}function s(e,t,r,n){if('object'!=typeof e||null===e||Array.isArray(e))throw new o.JsonPatchError('Operation is not an object','OPERATION_NOT_AN_OBJECT',t,e,r);else if(!h[e.op])throw new o.JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902','OPERATION_OP_INVALID',t,e,r);else if('string'!=typeof e.path)throw new o.JsonPatchError('Operation `path` property is not a string','OPERATION_PATH_INVALID',t,e,r);else if(0!==e.path.indexOf('/')&&0<e.path.length)throw new o.JsonPatchError('Operation `path` property must start with "/"','OPERATION_PATH_INVALID',t,e,r);else if(('move'===e.op||'copy'===e.op)&&'string'!=typeof e.from)throw new o.JsonPatchError('Operation `from` property is not present (applicable in `move` and `copy` operations)','OPERATION_FROM_REQUIRED',t,e,r);else if(('add'===e.op||'replace'===e.op||'test'===e.op)&&e.value===void 0)throw new o.JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)','OPERATION_VALUE_REQUIRED',t,e,r);else if(('add'===e.op||'replace'===e.op||'test'===e.op)&&l.hasUndefined(e.value))throw new o.JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)','OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED',t,e,r);else if(r)if('add'==e.op){var a=e.path.split('/').length,s=n.split('/').length;if(a!==s+1&&a!==s)throw new o.JsonPatchError('Cannot perform an `add` operation at the desired path','OPERATION_PATH_CANNOT_ADD',t,e,r)}else if('replace'===e.op||'remove'===e.op||'_get'===e.op){if(e.path!==n)throw new o.JsonPatchError('Cannot perform the operation at a path that does not exist','OPERATION_PATH_UNRESOLVABLE',t,e,r);}else if('move'===e.op||'copy'===e.op){var i={op:'_get',path:e.from,value:void 0},d=p([i],r);if(d&&'OPERATION_PATH_UNRESOLVABLE'===d.name)throw new o.JsonPatchError('Cannot perform the operation from a path that does not exist','OPERATION_FROM_UNRESOLVABLE',t,e,r)}}function p(e,t,r){try{if(!Array.isArray(e))throw new o.JsonPatchError('Patch sequence must be an array','SEQUENCE_NOT_AN_ARRAY');if(t)a(l._deepClone(t),l._deepClone(e),r||!0);else{r=r||s;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(t){if(t instanceof o.JsonPatchError)return t;throw t}}var i={strict:!0},d=t(9),c=function(e,t){return d(e,t,i)},l=t(3);o.JsonPatchError=l.PatchError,o.deepClone=l._deepClone;var h={add:function(e,t,o){return e[t]=this.value,{newDocument:o}},remove:function(e,t,o){var r=e[t];return delete e[t],{newDocument:o,removed:r}},replace:function(e,t,o){var r=e[t];return e[t]=this.value,{newDocument:o,removed:r}},move:function(e,t,o){var a=r(o,this.path);a&&(a=l._deepClone(a));var s=n(o,{op:'remove',path:this.from}).removed;return n(o,{op:'add',path:this.path,value:s}),{newDocument:o,removed:a}},copy:function(e,t,o){var a=r(o,this.from);return n(o,{op:'add',path:this.path,value:l._deepClone(a)}),{newDocument:o}},test:function(e,t,o){return{newDocument:o,test:c(e[t],this.value)}},_get:function(e,t,o){return this.value=e[t],{newDocument:o}}},u={add:function(e,t,o){return l.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:o,index:t}},remove:function(e,t,o){var r=e.splice(t,1);return{newDocument:o,removed:r[0]}},replace:function(e,t,o){var r=e[t];return e[t]=this.value,{newDocument:o,removed:r}},move:h.move,copy:h.copy,test:h.test,_get:h._get};o.getValueByPointer=r,o.applyOperation=n,o.applyPatch=a,o.applyReducer=function(e,t){var r=n(e,t);if(!1===r.test)throw new o.JsonPatchError('Test operation failed','TEST_OPERATION_FAILED',0,t,e);return r.newDocument},o.validator=s,o.validate=p},function(e){function t(){throw new Error('setTimeout has not been defined')}function o(){throw new Error('clearTimeout has not been defined')}function r(e){if(d===setTimeout)return setTimeout(e,0);if((d===t||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function n(e){if(c===clearTimeout)return clearTimeout(e);if((c===o||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function a(){f&&h&&(f=!1,h.length?u=h.concat(u):y=-1,u.length&&s())}function s(){if(!f){var e=r(a);f=!0;for(var t=u.length;t;){for(h=u,u=[];++y<t;)h&&h[y].run();y=-1,t=u.length}h=null,f=!1,n(e)}}function p(e,t){this.fun=e,this.array=t}function i(){}var d,c,l=e.exports={};(function(){try{d='function'==typeof setTimeout?setTimeout:t}catch(o){d=t}try{c='function'==typeof clearTimeout?clearTimeout:o}catch(t){c=o}})();var h,u=[],f=!1,y=-1;l.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];u.push(new p(e,t)),1!==u.length||f||r(s)},p.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}},function(e,t,o){e.exports=o(20)},function(e,t,o){function r(e){for(var t=0,o=f.length;t<o;t++)if(f[t].obj===e)return f[t]}function n(e,t){for(var o=0,r=e.observers.length;o<r;o++)if(e.observers[o].callback===t)return e.observers[o].observer}function a(e,t){for(var o=0,r=e.observers.length;o<r;o++)if(e.observers[o].observer===t)return void e.observers.splice(o,1)}function s(e){for(var t,o=0,r=f.length;o<r;o++)if(f[o].obj===e.object){t=f[o];break}p(t.value,e.object,e.patches,''),e.patches.length&&l.applyPatch(t.value,e.patches);var n=e.patches;return 0<n.length&&(e.patches=[],e.callback&&e.callback(n)),n}function p(e,o,r,n){if(o!==e){'function'==typeof o.toJSON&&(o=o.toJSON());for(var a=c._objectKeys(o),s=c._objectKeys(e),i=!1,d=!1,l=s.length-1;0<=l;l--){var t=s[l],h=e[t];if(c.hasOwnProperty(o,t)&&(void 0!==o[t]||void 0===h||!1!==Array.isArray(o))){var u=o[t];'object'==typeof h&&null!=h&&'object'==typeof u&&null!=u?p(h,u,r,n+'/'+c.escapePathComponent(t)):h!==u&&(i=!0,r.push({op:'replace',path:n+'/'+c.escapePathComponent(t),value:c._deepClone(u)}))}else r.push({op:'remove',path:n+'/'+c.escapePathComponent(t)}),d=!0}if(d||a.length!=s.length)for(var t,l=0;l<a.length;l++)t=a[l],c.hasOwnProperty(e,t)||void 0===o[t]||r.push({op:'add',path:n+'/'+c.escapePathComponent(t),value:c._deepClone(o[t])})}}var i={strict:!0},d=o(9),c=o(3),l=o(10),h=o(10);t.applyOperation=h.applyOperation,t.applyPatch=h.applyPatch,t.applyReducer=h.applyReducer,t.getValueByPointer=h.getValueByPointer,t.validate=h.validate,t.validator=h.validator;var u=o(3);t.JsonPatchError=u.PatchError,t.deepClone=u._deepClone,t.escapePathComponent=u.escapePathComponent,t.unescapePathComponent=u.unescapePathComponent;var f=[],y=function(){return function(e){this.observers=[],this.obj=e}}(),m=function(){return function(e,t){this.callback=e,this.observer=t}}();t.unobserve=function(e,t){t.unobserve()},t.observe=function(e,t){var o,p=r(e);if(p?o=n(p,t):(p=new y(e),f.push(p)),o)return o;if(o={},p.value=c._deepClone(e),t){o.callback=t,o.next=null;var i=function(){s(o)},d=function(){clearTimeout(o.next),o.next=setTimeout(i)};'undefined'!=typeof window&&(window.addEventListener?(window.addEventListener('mouseup',d),window.addEventListener('keyup',d),window.addEventListener('mousedown',d),window.addEventListener('keydown',d),window.addEventListener('change',d)):(document.documentElement.attachEvent('onmouseup',d),document.documentElement.attachEvent('onkeyup',d),document.documentElement.attachEvent('onmousedown',d),document.documentElement.attachEvent('onkeydown',d),document.documentElement.attachEvent('onchange',d)))}return o.patches=[],o.object=e,o.unobserve=function(){s(o),clearTimeout(o.next),a(p,o),'undefined'!=typeof window&&(window.removeEventListener?(window.removeEventListener('mouseup',d),window.removeEventListener('keyup',d),window.removeEventListener('mousedown',d),window.removeEventListener('keydown',d)):(document.documentElement.detachEvent('onmouseup',d),document.documentElement.detachEvent('onkeyup',d),document.documentElement.detachEvent('onmousedown',d),document.documentElement.detachEvent('onkeydown',d)))},p.observers.push(new m(t,o)),o},t.generate=s,t.compare=function(e,t){var o=[];return p(e,t,o,''),o}},function(e,t,o){if('undefined'==typeof r)var r=o(1).JSONPatchQueue;var n=function(e,t,o,n,a){r.call(this,e,o,n,a),this.transform=t,this.pending=[]};n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.ackLocalVersion=0,n.prototype.send=function(e){var t=e.slice(0);t.unshift({op:'test',path:this.remotePath,value:this.remoteVersion});var o=r.prototype.send.call(this,t);return this.pending.push(o),o},n.prototype.receive=function(e,t){var o=t||this.apply,n=this;return r.prototype.receive.call(this,e,function(e,t){var r=t.slice(0),a=r.shift().value,s=a-n.ackLocalVersion;return n.ackLocalVersion=a,n.pending.splice(0,s),n.pending.length&&(r=n.transform(r,n.pending)),n.obj=o(n.obj,r)})},n.prototype.reset=function(e){return this.ackLocalVersion=r.getPropertyByJsonPointer(e,this.localPath),this.pending=[],this.obj=r.prototype.reset.call(this,e)},e.exports=n,e.exports.default=n,e.exports.__esModule=!0},function(e){var t=function(){function e(e,o,r){var n=e.substr(o.length),a=n.indexOf('/');-1<a||(a=n.length);var s=n.substr(0,a),p=n.substr(a);return t(s)&&s>r?o+(s-1)+p:e}function t(e){var t=~~+e;return t+''===e&&0<=t}var o=!1,r=r||{};r.transform=function(e,t){var o=[];o=o.concat.apply(o,t);var r=JSON.parse(JSON.stringify(e)),a=o.reduce(n,r);return a},r.transformAgainstSingleOp=function(){};var n=function(e,t){if(t.value===void 0&&('add'===t.op||'replace'===t.op||'test'===t.op))throw new Error('\'value\' MUST be defined');if(void 0===t.from&&('copy'===t.op||'move'===t.op))throw new Error('\'from\' MUST be defined');if(!a[t.op]);else if('function'==typeof a[t.op])a[t.op](t,e);else for(var o,r=e.length,n=0;n<r;)o=e[n],n++,!a[t.op][o.op]||a[t.op][o.op](t,o);return e},a={remove:function(r,n){for(var a,s=n.length,p=0;a=n[p];)o,('add'===a.op||'test'===a.op)&&r.path===a.path||(a.from&&(a.from===r.path||0===a.from.indexOf(r.path+'/'))||r.path===a.path||0===a.path.indexOf(r.path+'/'))&&(o,n.splice(p,1),s--,p--),p++;var i=r.path.lastIndexOf('/');if(-1<i){var d=r.path.substr(i+1),c=r.path.substr(0,i+1);if(t(d))for(o,o,s=n.length,p=0;p<s;)a=n[p],p++,0===a.path.indexOf(c)&&(a.path=e(a.path,c,d)),a.from&&0===a.from.indexOf(c)&&(a.from=e(a.from,c,d))}},replace:function(e,t){for(var r,n=0;r=t[n];)o,(r.from&&(r.from===e.path||0===r.from.indexOf(e.path+'/'))||0===r.path.indexOf(e.path+'/'))&&(o,t.splice(n,1),n--),n++}};return r}();e.exports=t,e.exports.default=t,e.exports.__esModule=!0},function(e){'use strict';const t=function(){function e(e){return-1==e.indexOf('/')&&-1==e.indexOf('~')?e:e.replace(/~/g,'~0').replace(/\//g,'~1')}function t(e,t){for(var o=[],r=e.parenthoodMap.get(t);r&&r.path;)o.unshift(r.path),r=e.parenthoodMap.get(r.parent);if(o.length){const e=o.join('/');return'/'+e}return''}function o(o,r,n,a){const s=t(o,r);var p=s+'/'+e(n);{if(o.proxifiedObjectsMap.has(a)){var i=o.proxifiedObjectsMap.get(a);o.parenthoodMap.set(i.originalObject,{parent:r,path:n})}const e=o.proxifiedObjectsMap.get(a);e&&!o.isProxifyingTreeNow&&(e.inherited=!0)}if(a&&'object'==typeof a&&!o.proxifiedObjectsMap.has(a)&&(o.parenthoodMap.set(a,{parent:r,path:n}),a=o._proxifyObjectTreeRecursively(r,a,n)),'undefined'==typeof a){if(r.hasOwnProperty(n)){Array.isArray(r)?o.defaultCallback({op:'replace',path:p,value:null}):o.defaultCallback({op:'remove',path:p});const e=o.proxifiedObjectsMap.get(r[n]);return e&&(o.parenthoodMap.delete(r[n]),o.disableTrapsForProxy(e),o.proxifiedObjectsMap.delete(e)),Reflect.set(r,n,a)}if(!Array.isArray(r))return Reflect.set(r,n,a)}return Array.isArray(r)&&!Number.isInteger(+n.toString())?Reflect.set(r,n,a):r.hasOwnProperty(n)?'undefined'==typeof r[n]?(Array.isArray(r)?o.defaultCallback({op:'replace',path:p,value:a}):o.defaultCallback({op:'add',path:p,value:a}),Reflect.set(r,n,a)):(o.defaultCallback({op:'replace',path:p,value:a}),Reflect.set(r,n,a)):(o.defaultCallback({op:'add',path:p,value:a}),Reflect.set(r,n,a))}function r(o,r,n){if('undefined'!=typeof r[n]){const a=t(o,r),s=a+'/'+e(n);o.defaultCallback({op:'remove',path:s});const p=o.proxifiedObjectsMap.get(r[n]);p&&(p.inherited?p.inherited=!1:(o.parenthoodMap.delete(p.originalObject),o.disableTrapsForProxy(p),o.proxifiedObjectsMap.delete(r[n])))}return Reflect.deleteProperty(r,n)}function n(){this.defaultCallback=(e)=>{this.isRecording&&this.patches.push(e),this.userCallback&&this.userCallback(e)},this.isObserving=!0}function a(){this.defaultCallback=()=>{},this.isObserving=!1}function s(e,t){this.isProxifyingTreeNow=!1,this.isObserving=!1,this.proxifiedObjectsMap=new Map,this.parenthoodMap=new Map,'boolean'!=typeof t&&(t=!0),this.showDetachedWarning=t,this.originalObject=e,this.cachedProxy=null,this.isRecording=!1,this.userCallback,this.resume=n.bind(this),this.pause=a.bind(this)}return s.deepClone=function(e){switch(typeof e){case'object':return JSON.parse(JSON.stringify(e));case'undefined':return null;default:return e;}},s.escapePathComponent=e,s.prototype.generateProxyAtPath=function(e,t,n){if(!t)return t;const a=this,s={set:(e,t,r,n)=>o(a,e,t,r,n),deleteProperty:(e,t)=>r(a,e,t)},p=Proxy.revocable(t,s);return p.trapsInstance=s,p.originalObject=t,this.parenthoodMap.set(t,{parent:e,path:n}),this.proxifiedObjectsMap.set(p.proxy,p),p.proxy},s.prototype._proxifyObjectTreeRecursively=function(t,o,r){for(let n in o)o.hasOwnProperty(n)&&o[n]instanceof Object&&(o[n]=this._proxifyObjectTreeRecursively(o,o[n],e(n)));return this.generateProxyAtPath(t,o,r)},s.prototype.proxifyObjectTree=function(e){this.pause(),this.isProxifyingTreeNow=!0;const t=this._proxifyObjectTreeRecursively(void 0,e,'');return this.isProxifyingTreeNow=!1,this.resume(),t},s.prototype.disableTrapsForProxy=function(e){if(this.showDetachedWarning){const t='You\'re accessing an object that is detached from the observedObject tree, see https://github.com/Palindrom/JSONPatcherProxy#detached-objects';e.trapsInstance.set=(e,o,r)=>{return console.warn(t),Reflect.set(e,o,r)},e.trapsInstance.set=(e,o,r)=>{return console.warn(t),Reflect.set(e,o,r)},e.trapsInstance.deleteProperty=(e,t)=>{return Reflect.deleteProperty(e,t)}}else delete e.trapsInstance.set,delete e.trapsInstance.get,delete e.trapsInstance.deleteProperty},s.prototype.observe=function(e,t){if(!e&&!t)throw new Error('You need to either record changes or pass a callback');return this.isRecording=e,this.userCallback=t,e&&(this.patches=[]),this.cachedProxy=this.proxifyObjectTree(this.originalObject),this.cachedProxy},s.prototype.generate=function(){if(!this.isRecording)throw new Error('You should set record to true to get patches later');return this.patches.splice(0,this.patches.length)},s.prototype.revoke=function(){this.proxifiedObjectsMap.forEach((e)=>{e.revoke()})},s.prototype.disableTraps=function(){this.proxifiedObjectsMap.forEach(this.disableTrapsForProxy,this)},s}();e.exports=t,e.exports.default=t},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(o){'object'==typeof window&&(t=window)}e.exports=t},function(e){e.exports=URL},function(e){e.exports=WebSocket},function(e,t,o){'use strict';function r(e){var t=new s(e),o=a(s.prototype.request,t);return n.extend(o,s.prototype,t),n.extend(o,t),o}var n=o(0),a=o(8),s=o(22),p=o(2),i=r(p);i.Axios=s,i.create=function(e){return r(n.merge(p,e))},i.Cancel=o(5),i.CancelToken=o(21),i.isCancel=o(6),i.all=function(e){return Promise.all(e)},i.spread=o(36),e.exports=i,e.exports.default=i},function(e,t,o){'use strict';function r(e){if('function'!=typeof e)throw new TypeError('executor must be a function.');var t;this.promise=new Promise(function(e){t=e});var o=this;e(function(e){o.reason||(o.reason=new n(e),t(o.reason))})}var n=o(5);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e,t=new r(function(t){e=t});return{token:t,cancel:e}},e.exports=r},function(e,t,o){'use strict';function r(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var n=o(2),a=o(0),s=o(23),p=o(24),i=o(32),d=o(30);r.prototype.request=function(e){'string'==typeof e&&(e=a.merge({url:arguments[0]},arguments[1])),e=a.merge(n,this.defaults,{method:'get'},e),e.baseURL&&!i(e.url)&&(e.url=d(e.baseURL,e.url));var t=[p,void 0],o=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)o=o.then(t.shift(),t.shift());return o},a.forEach(['delete','get','head'],function(e){r.prototype[e]=function(t,o){return this.request(a.merge(o||{},{method:e,url:t}))}}),a.forEach(['post','put','patch'],function(e){r.prototype[e]=function(t,o,r){return this.request(a.merge(r||{},{method:e,url:t,data:o}))}}),e.exports=r},function(e,t,o){'use strict';function r(){this.handlers=[]}var n=o(0);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,o){'use strict';function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var n=o(0),a=o(27),s=o(6),p=o(2);e.exports=function(e){r(e),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(['delete','get','head','post','put','patch','common'],function(t){delete e.headers[t]});var t=e.adapter||p.adapter;return t(e).then(function(t){return r(e),t.data=a(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(r(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e){'use strict';e.exports=function(e,t,o,r){return e.config=t,o&&(e.code=o),e.response=r,e}},function(e,t,o){'use strict';var r=o(7);e.exports=function(e,t,o){var n=o.config.validateStatus;o.status&&n&&!n(o.status)?t(r('Request failed with status code '+o.status,o.config,null,o)):e(o)}},function(e,t,o){'use strict';var r=o(0);e.exports=function(e,t,o){return r.forEach(o,function(o){e=o(e,t)}),e}},function(e){'use strict';function t(){this.message='String contains an invalid character'}t.prototype=new Error,t.prototype.code=5,t.prototype.name='InvalidCharacterError',e.exports=function(e){for(var o,r,n=e+'',a='',s=0,p='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';n.charAt(0|s)||(p='=',s%1);a+=p.charAt(63&o>>8-8*(s%1))){if(r=n.charCodeAt(s+=3/4),255<r)throw new t;o=o<<8|r}return a}},function(e,t,o){'use strict';function r(e){return encodeURIComponent(e).replace(/%40/gi,'@').replace(/%3A/gi,':').replace(/%24/g,'$').replace(/%2C/gi,',').replace(/%20/g,'+').replace(/%5B/gi,'[').replace(/%5D/gi,']')}var n=o(0);e.exports=function(e,t,o){if(!t)return e;var a;if(o)a=o(t);else if(n.isURLSearchParams(t))a=t.toString();else{var s=[];n.forEach(t,function(e,t){null===e||'undefined'==typeof e||(n.isArray(e)&&(t+='[]'),!n.isArray(e)&&(e=[e]),n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+'='+r(e))}))}),a=s.join('&')}return a&&(e+=(-1===e.indexOf('?')?'?':'&')+a),e}},function(e){'use strict';e.exports=function(e,t){return e.replace(/\/+$/,'')+'/'+t.replace(/^\/+/,'')}},function(e,t,o){'use strict';var r=o(0);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,o,n,a,s){var p=[];p.push(e+'='+encodeURIComponent(t)),r.isNumber(o)&&p.push('expires='+new Date(o).toGMTString()),r.isString(n)&&p.push('path='+n),r.isString(a)&&p.push('domain='+a),!0===s&&p.push('secure'),document.cookie=p.join('; ')},read:function(e){var t=document.cookie.match(new RegExp('(^|;\\s*)('+e+')=([^;]*)'));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,'',Date.now()-8.64e7)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e){'use strict';e.exports=function(e){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,o){'use strict';var r=o(0);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return o&&(n.setAttribute('href',t),t=n.href),n.setAttribute('href',t),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,''):'',host:n.host,search:n.search?n.search.replace(/^\?/,''):'',hash:n.hash?n.hash.replace(/^#/,''):'',hostname:n.hostname,port:n.port,pathname:'/'===n.pathname.charAt(0)?n.pathname:'/'+n.pathname}}var t,o=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement('a');return t=e(window.location.href),function(o){var n=r.isString(o)?e(o):o;return n.protocol===t.protocol&&n.host===t.host}}():function(){return function(){return!0}}()},function(e,t,o){'use strict';var r=o(0);e.exports=function(e,t){r.forEach(e,function(o,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=o,delete e[r])})}},function(e,t,o){'use strict';var r=o(0);e.exports=function(e){var t,o,n,a={};return e?(r.forEach(e.split('\n'),function(e){n=e.indexOf(':'),t=r.trim(e.substr(0,n)).toLowerCase(),o=r.trim(e.substr(n+1)),t&&(a[t]=a[t]?a[t]+', '+o:o)}),a):a}},function(e){'use strict';e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){function o(e){return'[object Arguments]'==Object.prototype.toString.call(e)}function r(e){return e&&'object'==typeof e&&'number'==typeof e.length&&Object.prototype.hasOwnProperty.call(e,'callee')&&!Object.prototype.propertyIsEnumerable.call(e,'callee')||!1}var n='[object Arguments]'==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=n?o:r,t.supported=o;t.unsupported=r},function(e,t){function o(e){var t=[];for(var o in e)t.push(o);return t}t=e.exports='function'==typeof Object.keys?Object.keys:o,t.shim=o},function(e){var t=function(e,t,o,r){this.obj=e,this.waiting=[],this.versionPath=t,this.apply=o,this.purist=r};t.prototype.version=0,t.prototype.receive=function(e,t){var o=t||this.apply,r=e.slice(0);if(this.purist)r.shift();var n=r.shift(),a=n.value;if(a<=this.version)throw new Error('Given version was already applied.');else if(a==this.version+1)for(;r;)this.version++,this.obj=o(this.obj,r),r=this.waiting.shift();else this.waiting[a-this.version-2]=r},t.prototype.send=function(e){this.version++;var t=e.slice(0);return t.unshift({op:'replace',path:this.versionPath,value:this.version}),this.purist&&t.unshift({op:'test',path:this.versionPath,value:this.version-1}),t},t.getPropertyByJsonPointer=function(e,t){var o=t.split('/');''===o[0]&&o.shift();for(var r=e;o.length;){var n=o.shift().replace('~1','/').replace('~0','~');o.length&&(r=r[n])}return r[n]},t.prototype.reset=function(e){this.version=t.getPropertyByJsonPointer(e,this.versionPath),this.waiting=[];return this.obj=this.apply(this.obj,[{op:'replace',path:'',value:e}])},e.exports=t,e.exports.default=t,e.exports.__esModule=!0},function(e){var t=function(e,t,o,r){this.obj=e,this.waiting=[],this.localPath=t[0],this.remotePath=t[1],this.apply=o,this.purist=r};t.prototype.localVersion=0,t.prototype.remoteVersion=0,t.prototype.receive=function(e,t){var o=t||this.apply,r=e.slice(0);if(this.purist)r.shift();var n=r.shift(),a=n.value;if(a<=this.remoteVersion)throw new Error('Given version was already applied.');else if(a==this.remoteVersion+1)for(;r;)this.remoteVersion++,this.obj=o(this.obj,r),r=this.waiting.shift();else this.waiting[a-this.remoteVersion-2]=r},t.prototype.send=function(e){this.localVersion++;var t=e.slice(0);return this.purist?t.unshift({op:'test',path:this.localPath,value:this.localVersion-1},{op:'replace',path:this.localPath,value:this.localVersion}):t.unshift({op:'replace',path:this.localPath,value:this.localVersion}),t},t.getPropertyByJsonPointer=function(e,t){var o=t.split('/');''===o[0]&&o.shift();for(var r=e;o.length;){var n=o.shift().replace('~1','/').replace('~0','~');o.length&&(r=r[n])}return r[n]},t.prototype.reset=function(e){this.remoteVersion=t.getPropertyByJsonPointer(e,this.remotePath),this.waiting=[];return this.obj=this.apply(this.obj,[{op:'replace',path:'',value:e}])},e.exports=t,e.exports.default=t,e.exports.__esModule=!0},function(e,t,o){(function(t){var{applyPatch:r,validate:n}=o(13),a=o(16),s=o(1).JSONPatchQueueSynchronous,p=o(1).JSONPatchQueue,i=o(15),d=o(14),c=o(18),l=o(12),h=o(19).w3cwebsocket;if(!t.WebSocket&&h)var u=h;else if(t.WebSocket)var u=t.WebSocket;var f=function(){function e(e){return e.replace(/^http/i,'ws')}function t(e,t,o){function r(){n=i,a=0,s=!1,clearTimeout(p),p=null}var n,a,s,p,i=1e3,d=function(){0==a?(t(0),s=!1,n*=2,e()):(t(a),a-=1e3,setTimeout(d,1e3))};this.triggerReconnection=function(){s||(a=n,s=!0,d())},this.reconnectNow=function(){a=0,n=i},this.stopReconnecting=function(){r(),o()},r()}function o(e,t,o,r){var n,a;this.start=function(){n||(n=setTimeout(function(){this.notifySend(),e()}.bind(this),o))},this.notifySend=function(){clearTimeout(n),n=null,a||(a=setTimeout(function(){a=null,t()}.bind(this),r))},this.notifyReceive=function(){clearTimeout(a),a=null,this.start()},this.stop=function(){clearTimeout(n),n=null,clearTimeout(a),a=null}}function h(){this.start=this.stop=this.notifySend=this.notifyReceive=function(){}}function f(t,o,r,n,a,s,p,i,d){this.palindrom=t,this.remoteUrl='undefined'!=typeof window&&window.location?new c(o,window.location.href):new c(o),n&&(this.onReceive=n),a&&(this.onSend=a),s&&(this.onConnectionError=s),i&&(this.onFatalError=i),d&&(this.onStateChange=d),p&&(this.onSocketOpened=p);var l=this;Object.defineProperty(this,'useWebSocket',{get:function(){return r},set:function(t){return r=t,!1==t?l._ws&&(l._ws.onclose=function(){l._ws=null},l._ws.close()):!l.wsUrl&&(l.wsUrl=e(l.remoteUrl.href)),r}})}function y(e,t,o,r){return e.xhr(t,'application/json',o,function(t){r(t.data),e.useWebSocket&&e.webSocketUpgrade(e.onSocketOpened)})}function m(e){e._ws&&(e._ws.onclose=function(){},e._ws.close(),e._ws=null)}function g(e,t){this.obj=e,this.apply=t}function b(e,t){e.heartbeat.stop(),t(function(t){e.reconnector.stopReconnecting(),e.debug&&(e.remoteObj=JSON.parse(JSON.stringify(t))),e.queue.reset(t),e.heartbeat.start()})}function v(e){b(e,e.network.establish.bind(e.network))}function P(e){b(e,function(t){e.network.reestablish(e.queue.pending,t)})}function E(e){if('object'!=typeof e)throw new Error('Palindrom constructor requires an object argument.');if(!e.remoteUrl)throw new Error('remoteUrl is required');if(e.ignoreAdd)throw new TypeError('Palindrom: `ignoreAdd` is removed in favour of local state objects. see https://github.com/Palindrom/Palindrom/issues/136');Object.defineProperty(this,'ignoreAdd',{set:function(){throw new TypeError('Palindrom: Can\'t set `ignoreAdd`, it is removed in favour of local state objects. see https://github.com/Palindrom/Palindrom/issues/136')}}),this.debug=void 0==e.debug||e.debug;var r=function(){};if(this.isObserving=!1,this.onLocalChange=e.onLocalChange||r,this.onRemoteChange=e.onRemoteChange||r,this.onStateReset=e.onStateReset||e.callback||r,this.filterLocalChange=e.filterLocalChange||((e)=>e),e.callback&&console.warn('Palindrom: options.callback is deprecated. Please use `onStateReset` instead'),this.onPatchReceived=e.onPatchReceived||r,this.onPatchSent=e.onPatchSent||r,this.onSocketStateChanged=e.onSocketStateChanged||r,this.onConnectionError=e.onConnectionError||r,this.retransmissionThreshold=e.retransmissionThreshold||3,this.onReconnectionCountdown=e.onReconnectionCountdown||r,this.onReconnectionEnd=e.onReconnectionEnd||r,this.onSocketOpened=e.onSocketOpened||r,this.onIncomingPatchValidationError=e.onIncomingPatchValidationError||r,this.onOutgoingPatchValidationError=e.onOutgoingPatchValidationError||r,this.reconnector=new t(function(){P(this)}.bind(this),this.onReconnectionCountdown,this.onReconnectionEnd),e.pingIntervalS){const t=1e3*e.pingIntervalS;this.heartbeat=new o(this.ping.bind(this),this.handleConnectionError.bind(this),t,t)}else this.heartbeat=new h;this.network=new f(this,e.remoteUrl,e.useWebSocket||!1,this.handleRemoteChange.bind(this),this.onPatchSent.bind(this),this.handleConnectionError.bind(this),this.onSocketOpened.bind(this),this.handleFatalError.bind(this),this.onSocketStateChanged.bind(this)),Object.defineProperty(this,'useWebSocket',{get:function(){return this.network.useWebSocket},set:function(e){this.network.useWebSocket=e}}),this.queue=e.localVersionPath?e.remoteVersionPath?e.ot?new d(this.obj,i.transform,[e.localVersionPath,e.remoteVersionPath],this.validateAndApplySequence.bind(this),e.purity):new p(this.obj,[e.localVersionPath,e.remoteVersionPath],this.validateAndApplySequence.bind(this),e.purity):new s(this.obj,e.localVersionPath,this.validateAndApplySequence.bind(this),e.purity):new g(this.obj,this.validateAndApplySequence.bind(this)),v(this)}function O(e,t){var o=JSON.stringify(t);e.unobserve(),e.heartbeat.notifySend(),e.network.send(o),e.observe()}if('undefined'==typeof x)if('undefined'!=typeof window)var x=window;else var x={};return f.prototype.establish=function(e){y(this,this.remoteUrl.href,null,e)},f.prototype.reestablish=function(e,t){y(this,this.remoteUrl.href+'/reconnect',JSON.stringify(e),t)},f.prototype.send=function(e){var t=this;if(this.useWebSocket&&this._ws&&1===this._ws.readyState)this._ws.send(e),t.onSend(e,t._ws.url,'WS');else{var o=this.remoteUrl.href;this.xhr(o,'application/json-patch+json',e,function(e,r){t.onReceive(e.data,o,r)})}return this},f.prototype.onReceive=function(){},f.prototype.onSend=function(){},f.prototype.onStateChange=function(){},f.prototype.upgrade=function(){},f.prototype.webSocketUpgrade=function(t){var o=this;this.wsUrl=e(this.remoteUrl.href);var r=this.wsUrl;m(o),o._ws=new u(r),o._ws.onopen=function(e){o.onStateChange(o._ws.readyState,r),t&&t(e)},o._ws.onmessage=function(e){o.onReceive(JSON.parse(e.data),o._ws.url,'WS')},o._ws.onerror=function(e){if(o.onStateChange(o._ws.readyState,r,e.data),!!o.useWebSocket){var t={statusText:'WebSocket connection could not be made.',readyState:o._ws.readyState,url:r};o.onFatalError(t,r,'WS')}},o._ws.onclose=function(e){o.onStateChange(o._ws.readyState,r,null,e.code,e.reason);var t={statusText:'WebSocket connection closed.',readyState:o._ws.readyState,url:r,statusCode:e.code,reason:e.reason};e.reason?o.onFatalError(t,r,'WS'):!e.wasClean&&o.onConnectionError()}},f.prototype.getPatchUsingHTTP=function(e){var t=this;return this.xhr(e,'application/json-patch+json',null,function(o,r){t.onReceive(o.data,e,r)},!0)},f.prototype.changeState=function(e){return console.warn('Palindrom: changeState was renamed to `getPatchUsingHTTP`, and they\'re both not recommended to use, please use `PalindromDOM.morphUrl` instead'),this.getPatchUsingHTTP(e)},f.prototype.setRemoteUrl=function(e){if(this.remoteUrlSet&&this.remoteUrl&&this.remoteUrl!=e)throw new Error('Session lost. Server replied with a different session ID that was already set. \nPossibly a server restart happened while you were working. \nPlease reload the page.\n\nPrevious session ID: '+this.remoteUrl+'\nNew session ID: '+e);this.remoteUrlSet=!0,this.remoteUrl=new c(e,this.remoteUrl.href)},f.prototype.handleResponseHeader=function(e){var t=e.headers&&(e.headers['x-location']||e.headers.location);t&&this.setRemoteUrl(t)},f.prototype.xhr=function(e,t,o,r,n){const a=o?'PATCH':'GET',s={},p=this;var i;o&&(s['Content-Type']='application/json-patch+json'),t&&(s.Accept=t),this.remoteUrl&&n&&(s['X-Referer']=this.remoteUrl.pathname),i='GET'==a?l.get(e,{headers:s}):l.patch(e,o,{headers:s}),i.then(function(e){p.handleResponseHeader(e),r&&r.call(p.palindrom,e,a)}).catch(function(t){const o=t.response;if(o&&p.onFatalError({statusCode:o.status,statusText:o.statusText,reason:o.data},e,a),!o)throw t}),this.onSend(o,e,a)},g.prototype.send=function(e){return e},g.prototype.receive=function(e){return this.obj=this.apply(this.obj,e)},g.prototype.reset=function(e){return this.obj=this.apply(this.obj,[{op:'replace',path:'',value:e}])},E.prototype.ping=function(){O(this,[])},E.prototype.prepareProxifiedObject=function(e){e||(e={}),this.jsonPatcherProxy=new a(e);const t=this.jsonPatcherProxy.observe(!1,(e)=>{const t=this.filterLocalChange(e);t&&this.handleLocalChange(t)});Object.defineProperty(this,'obj',{get:function(){return t},set:function(){throw new Error('palindrom.obj is readonly')},configurable:!0}),this.isObserving=!0},E.prototype.observe=function(){this.jsonPatcherProxy&&this.jsonPatcherProxy.resume(),this.isObserving=!0},E.prototype.unobserve=function(){this.jsonPatcherProxy&&this.jsonPatcherProxy.pause(),this.isObserving=!1},E.prototype.handleLocalChange=function(e){const t=[e];this.debug&&this.validateSequence(this.remoteObj,t),O(this,this.queue.send(t)),this.onLocalChange(t)},E.prototype.validateAndApplySequence=function(e,t){try{this.unobserve();var o=r(e,t,this.debug);this.observe(),o.newDocument!==e&&(this.prepareProxifiedObject(o.newDocument),this.queue.obj=this.obj,this.onStateReset(this.obj)),this.onRemoteChange(t,o)}catch(e){if(this.debug)return void this.onIncomingPatchValidationError(e);throw e}return this.obj},E.prototype.validateSequence=function(e,t){var o=n(t,e);o&&this.onOutgoingPatchValidationError(o)},E.prototype.handleConnectionError=function(){this.heartbeat.stop(),this.reconnector.triggerReconnection()},E.prototype.handleFatalError=function(e,t,o){this.heartbeat.stop(),this.reconnector.stopReconnecting(),this.onConnectionError&&this.onConnectionError(e,t,o)},E.prototype.reconnectNow=function(){this.reconnector.reconnectNow()},E.prototype.showWarning=function(e,t){this.debug&&x.console&&console.warn&&(t&&(e+=' ('+t+')'),console.warn('Palindrom warning: '+e))},E.prototype.handleRemoteChange=function(e,t,o){this.heartbeat.notifyReceive();var r=e||[];0!==r.length&&(this.onPatchReceived&&this.onPatchReceived(e,t,o),this.isObserving&&(this.queue.receive(r),this.queue.pending&&this.queue.pending.length&&this.queue.pending.length>this.retransmissionThreshold&&this.queue.pending.forEach(O.bind(null,this)),this.debug&&(this.remoteObj=JSON.parse(JSON.stringify(this.obj)))))},x.Puppet=E,E}();e.exports=f,e.exports.default=f,e.exports.__esModule=!0}).call(t,o(17))}]);
>>>>>>> master
