/*! Palindrom, version: 6.2.0 */
var Palindrom=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}([function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});class r extends Error{constructor(e){super(e),this.message=e}}class o extends r{constructor(e,t,n,r){if(!t||!["Server","Client"].includes(t))throw new TypeError("Error constructing PalindromConnectionError, `side` parameter is required and can either be 'Server' or 'Client'");super(e),this.side=t,this.message=`${t} error\n\t${e.replace(/\n/g,"\n\t")}`,this.url=n,this.connectionType=r}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(2);
/*! Palindrom
 * https://github.com/Palindrom/Palindrom
 * (c) 2017 Joachim Wester
 * MIT license
 */
function o(e,t){var n;t?(n=Object(r.resolve)(t,e),n=Object(r.parse)(n)):n=Object(r.parse)(e),Object.assign(this,n)}},function(e,t,n){"use strict";var r=n(8),o=n(11);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=w,t.resolve=function(e,t){return w(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?w(e,!1,!0).resolveObject(t):t},t.format=function(e){o.isString(e)&&(e=w(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),l=["%","/","?",";","#"].concat(u),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=n(12);function w(e,t,n){if(e&&o.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}i.prototype.parse=function(e,t,n){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),a=-1!==i&&i<e.indexOf("#")?"?":"#",c=e.split(a);c[0]=c[0].replace(/\\/g,"/");var w=e=c.join(a);if(w=w.trim(),!n&&1===e.split("#").length){var b=h.exec(w);if(b)return this.path=w,this.href=w,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?g.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var _=s.exec(w);if(_){var O=(_=_[0]).toLowerCase();this.protocol=O,w=w.substr(_.length)}if(n||_||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var P="//"===w.substr(0,2);!P||_&&y[_]||(w=w.substr(2),this.slashes=!0)}if(!y[_]&&(P||_&&!m[_])){for(var j,E,A=-1,S=0;S<p.length;S++){-1!==(T=w.indexOf(p[S]))&&(-1===A||T<A)&&(A=T)}-1!==(E=-1===A?w.lastIndexOf("@"):w.lastIndexOf("@",A))&&(j=w.slice(0,E),w=w.slice(E+1),this.auth=decodeURIComponent(j)),A=-1;for(S=0;S<l.length;S++){var T;-1!==(T=w.indexOf(l[S]))&&(-1===A||T<A)&&(A=T)}-1===A&&(A=w.length),this.host=w.slice(0,A),w=w.slice(A),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var x=this.hostname.split(/\./),C=(S=0,x.length);S<C;S++){var N=x[S];if(N&&!N.match(f)){for(var k="",I=0,U=N.length;I<U;I++)N.charCodeAt(I)>127?k+="x":k+=N[I];if(!k.match(f)){var M=x.slice(0,S),L=x.slice(S+1),q=N.match(d);q&&(M.push(q[1]),L.unshift(q[2])),L.length&&(w="/"+L.join(".")+w),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=r.toASCII(this.hostname));var V=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+V,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w))}if(!v[O])for(S=0,C=u.length;S<C;S++){var F=u[S];if(-1!==w.indexOf(F)){var J=encodeURIComponent(F);J===F&&(J=escape(F)),w=w.split(F).join(J)}}var W=w.indexOf("#");-1!==W&&(this.hash=w.substr(W),w=w.slice(0,W));var H=w.indexOf("?");if(-1!==H?(this.search=w.substr(H),this.query=w.substr(H+1),t&&(this.query=g.parse(this.query)),w=w.slice(0,H)):t&&(this.search="",this.query={}),w&&(this.pathname=w),m[O]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){V=this.pathname||"";var $=this.search||"";this.path=V+$}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=g.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(w(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(o.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var h=Object.keys(e),c=0;c<h.length;c++){var u=h[c];"protocol"!==u&&(n[u]=e[u])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!m[e.protocol]){for(var l=Object.keys(e),p=0;p<l.length;p++){var f=l[p];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||y[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",g=n.search||"";n.path=v+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var w=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=b||w||n.host&&e.pathname,O=_,P=n.pathname&&n.pathname.split("/")||[],j=(d=e.pathname&&e.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(j&&(n.hostname="",n.port=null,n.host&&(""===P[0]?P[0]=n.host:P.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),_=_&&(""===d[0]||""===P[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,P=d;else if(d.length)P||(P=[]),P.pop(),P=P.concat(d),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(j)n.hostname=n.host=P.shift(),(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift());return n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!P.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=P.slice(-1)[0],A=(n.host||e.host||P.length>1)&&("."===E||".."===E)||""===E,S=0,T=P.length;T>=0;T--)"."===(E=P[T])?P.splice(T,1):".."===E?(P.splice(T,1),S++):S&&(P.splice(T,1),S--);if(!_&&!O)for(;S--;S)P.unshift("..");!_||""===P[0]||P[0]&&"/"===P[0].charAt(0)||P.unshift(""),A&&"/"!==P.join("/").substr(-1)&&P.push("");var R,x=""===P[0]||P[0]&&"/"===P[0].charAt(0);j&&(n.hostname=n.host=x?"":P.length?P.shift():"",(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift()));return(_=_||n.host&&P.length)&&!x&&P.unshift(""),P.length?n.pathname=P.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var r=n(0);const o="Client";function i(e,t,n,i){let s,a;this.start=function(){s||(s=setTimeout(()=>{this.notifySend(),e()},n))},this.notifySend=function(){clearTimeout(s),s=null,a||(a=setTimeout(()=>{a=null,t(new r.a("Timeout has passed and response hasn't arrived",o,this.remoteUrl,"Unknown"))},i))},this.notifyReceive=function(){clearTimeout(a),a=null,this.start()},this.stop=()=>{clearTimeout(s),s=null,clearTimeout(a),a=null}}function s(){this.start=this.stop=this.notifySend=this.notifyReceive=()=>{}}},function(e,t){e.exports=WebSocket},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var r=n(1),o=n(0),i=n(3),s=n(4),a=n.n(s),h=n(6),c=n.n(h);const u="Client",l="Server",p="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==e&&e;function f(e){return e.replace(/^http/i,"ws")}class d{constructor(e,t,n,o,s,a,h,c,u){if(this.palindrom=e,"undefined"!=typeof window&&window.location?this.remoteUrl=new r.a(t,window.location.href):this.remoteUrl=new r.a(t),o&&(this.onReceive=o),s&&(this.onSend=s),a&&(this.onConnectionError=a),c&&(this.onStateChange=c),h&&(this.onSocketOpened=h),Object.defineProperty(this,"useWebSocket",{get:function(){return n},set:e=>(n=e,0==e?this._ws&&(this._ws.onclose=function(){this._ws=null},this._ws.close()):this.wsUrl||(this.wsUrl=f(this.remoteUrl.href)),n)}),u){const e=1e3*u;this.heartbeat=new i.a(()=>{this.send([])},this._handleConnectionError.bind(this),e,e)}else this.heartbeat=new i.b}async _establish(e=null){this.heartbeat.stop();const t=e?await this._fetch("PATCH",this.remoteUrl.href+"/reconnect","application/json",JSON.stringify(e)):await this._fetch("GET",this.remoteUrl.href,"application/json",null);return this.useWebSocket&&this.webSocketUpgrade(this.onSocketOpened),this.heartbeat.start(),t}_handleConnectionError(e){this.heartbeat.stop(),this.palindrom.reconnector.triggerReconnection(),this.onConnectionError(e)}_handleFatalError(e){this.heartbeat.stop(),this.palindrom.reconnector.stopReconnecting(),this.onConnectionError(e)}_notifyReceive(){this.heartbeat.notifyReceive(),this.onReceive(...arguments)}async send(e){this.heartbeat.notifySend();const t=JSON.stringify(e);if(this.useWebSocket&&this._ws&&1===this._ws.readyState)this._ws.send(t),this.onSend(t,this._ws.url,"WS");else{const e=this.remoteUrl.href,n="PATCH",r=await this._fetch(n,e,"application/json-patch+json",t);this._notifyReceive(r,e,n)}return this}onReceive(){}onSend(){}onStateChange(){}upgrade(e){}webSocketUpgrade(e){this.wsUrl=f(this.remoteUrl.href);const t=this.wsUrl;this.closeConnection();const n=a.a.w3cwebsocket||a.a;this._ws=new n(t),this._ws.onopen=n=>{this.onStateChange(this._ws.readyState,t),e&&e(n)},this._ws.onmessage=e=>{try{var t=JSON.parse(e.data)}catch(t){return void this._handleFatalError(new o.a(e.data,l,this._ws.url,"WS"))}this._notifyReceive(t,this._ws.url,"WS")},this._ws.onerror=e=>{if(this.onStateChange(this._ws.readyState,t,e.data),!this.useWebSocket)return;const n=["WebSocket connection could not be made","readyState: "+this._ws.readyState].join("\n");this._handleFatalError(new o.a(n,u,t,"WS"))},this._ws.onclose=e=>{this.onStateChange(this._ws.readyState,t,null,e.code,e.reason);const n=["WebSocket connection closed unexpectedly.","reason: "+e.reason,"readyState: "+this._ws.readyState,"stateCode: "+e.code].join("\n");e.reason?this._handleFatalError(new o.a(n,l,t,"WS")):e.wasClean||this._handleConnectionError(new o.a(n,l,t,"WS"))}}closeConnection(){this._ws&&(this._ws.onclose=()=>{},this._ws.close(),this._ws=null)}stop(){this.closeConnection(),this.heartbeat.stop(),this.heartbeat=new i.b}async getPatchUsingHTTP(e){const t=await this._fetch("GET",e,"application/json-patch+json",null,!0);return this._notifyReceive(t,e,"GET"),t}_setRemoteUrl(e){if(this.remoteUrlSet&&this.remoteUrl&&this.remoteUrl!=e){const t=["Session lost.","Server replied with a different session ID than the already set one.","Possibly a server restart happened while you were working.","Please reload the page.","Previous session ID: "+this.remoteUrl,"New session ID: "+e].join("\n");throw new o.b(t)}this.remoteUrlSet=!0,this.remoteUrl=new r.a(e,this.remoteUrl.href)}_handleLocationHeader(e){const t=e.headers.get("x-location")||e.headers.get("location");t&&this._setRemoteUrl(t)}async _handleFailureResponse(e,t,n){var r=`An unknown network error has occurred. Raw message: ${n.message}`;console.error(n);const i=[r,"statusCode: -1","reason: Maybe you lost connection with the server","url: "+e,"HTTP method: "+t].join("\n");this._handleFatalError(new o.a(i,u,e,t))}async _fetch(e,t,n,r,o){const i={headers:{},method:e,credentials:"include"},s=i.headers;r&&(s["Content-Type"]="application/json-patch+json",i.body=r),n&&(s.Accept=n),this.remoteUrl&&o&&(s["X-Referer"]=this.remoteUrl.pathname),this.onSend(r,t,e);let a=p&&p.fetch||c.a;const h=await a(t,i);return h.json().then(e=>{if(h.status<500)return this._handleLocationHeader(h),e;throw new Error(`HTTP ${h.status} response: response body is ${JSON.stringify(e)}`)}).catch(n=>{throw this._handleFailureResponse(t,e,n),n})}}}).call(this,n(7))},function(e,t){e.exports=null},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e,r){var o;/*! https://mths.be/punycode v1.3.2 by @mathias */!function(i){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,h=2147483647,c=36,u=1,l=26,p=38,f=700,d=72,v=128,y="-",m=/^xn--/,g=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=c-u,O=Math.floor,P=String.fromCharCode;function j(e){throw RangeError(b[e])}function E(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function A(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+E((e=e.replace(w,".")).split("."),t).join(".")}function S(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function T(e){return E(e,function(e){var t="";return e>65535&&(t+=P((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=P(e)}).join("")}function R(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,n){var r=0;for(e=n?O(e/f):e>>1,e+=O(e/t);e>_*l>>1;r+=c)e=O(e/_);return O(r+(_+1)*e/(e+p))}function C(e){var t,n,r,o,i,s,a,p,f,m,g,w=[],b=e.length,_=0,P=v,E=d;for((n=e.lastIndexOf(y))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&j("not-basic"),w.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<b;){for(i=_,s=1,a=c;o>=b&&j("invalid-input"),((p=(g=e.charCodeAt(o++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:c)>=c||p>O((h-_)/s))&&j("overflow"),_+=p*s,!(p<(f=a<=E?u:a>=E+l?l:a-E));a+=c)s>O(h/(m=c-f))&&j("overflow"),s*=m;E=x(_-i,t=w.length+1,0==i),O(_/t)>h-P&&j("overflow"),P+=O(_/t),_%=t,w.splice(_++,0,P)}return T(w)}function N(e){var t,n,r,o,i,s,a,p,f,m,g,w,b,_,E,A=[];for(w=(e=S(e)).length,t=v,n=0,i=d,s=0;s<w;++s)(g=e[s])<128&&A.push(P(g));for(r=o=A.length,o&&A.push(y);r<w;){for(a=h,s=0;s<w;++s)(g=e[s])>=t&&g<a&&(a=g);for(a-t>O((h-n)/(b=r+1))&&j("overflow"),n+=(a-t)*b,t=a,s=0;s<w;++s)if((g=e[s])<t&&++n>h&&j("overflow"),g==t){for(p=n,f=c;!(p<(m=f<=i?u:f>=i+l?l:f-i));f+=c)E=p-m,_=c-m,A.push(P(R(m+E%_,0))),p=O(E/_);A.push(P(R(p,0))),i=x(n,b,r==o),n=0,++r}++n,++t}return A.join("")}a={version:"1.3.2",ucs2:{decode:S,encode:T},decode:C,encode:N,toASCII:function(e){return A(e,function(e){return g.test(e)?"xn--"+N(e):e})},toUnicode:function(e){return A(e,function(e){return m.test(e)?C(e.slice(4).toLowerCase()):e})}},void 0===(o=function(){return a}.call(t,n,t,e))||(e.exports=o)}()}).call(this,n(9)(e),n(10))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(13),t.encode=t.stringify=n(14)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var h=1e3;i&&"number"==typeof i.maxKeys&&(h=i.maxKeys);var c=e.length;h>0&&c>h&&(c=h);for(var u=0;u<c;++u){var l,p,f,d,v=e[u].replace(a,"%20"),y=v.indexOf(n);y>=0?(l=v.substr(0,y),p=v.substr(y+1)):(l=v,p=""),f=decodeURIComponent(l),d=decodeURIComponent(p),r(s,f)?o(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(s(e),function(s){var a=encodeURIComponent(r(s))+n;return o(e[s])?i(e[s],function(e){return a+encodeURIComponent(r(e))}).join(t):a+encodeURIComponent(r(e[s]))}).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"JsonPatchError",function(){return m}),n.d(r,"deepClone",function(){return g}),n.d(r,"getValueByPointer",function(){return _}),n.d(r,"applyOperation",function(){return O}),n.d(r,"applyPatch",function(){return P}),n.d(r,"applyReducer",function(){return j}),n.d(r,"validator",function(){return E}),n.d(r,"validate",function(){return A}),n.d(r,"_areEquals",function(){return S});var o={};n.r(o),n.d(o,"unobserve",function(){return C}),n.d(o,"observe",function(){return N}),n.d(o,"generate",function(){return k}),n.d(o,"compare",function(){return U});var i,s=n(5),a=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=Object.prototype.hasOwnProperty;
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */function c(e,t){return h.call(e,t)}function u(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)c(e,r)&&t.push(r);return t}function l(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function p(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function f(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function d(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function v(e,t){var n=[e];for(var r in t){var o="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==o&&n.push(r+": "+o)}return n.join("\n")}var y=function(e){function t(t,n,r,o,i){var s=this.constructor,a=e.call(this,v(t,{name:n,index:r,operation:o,tree:i}))||this;return a.name=n,a.index=r,a.operation=o,a.tree=i,Object.setPrototypeOf(a,s.prototype),a.message=v(t,{name:n,index:r,operation:o,tree:i}),a}return a(t,e),t}(Error),m=y,g=l,w={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=_(n,this.path);r&&(r=l(r));var o=O(n,{op:"remove",path:this.from}).removed;return O(n,{op:"add",path:this.path,value:o}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=_(n,this.from);return O(n,{op:"add",path:this.path,value:l(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:S(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},b={add:function(e,t,n){return p(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:w.move,copy:w.copy,test:w.test,_get:w._get};function _(e,t){if(""==t)return e;var n={op:"_get",path:t};return O(e,n),n.value}function O(e,t,n,r,o,i){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===i&&(i=0),n&&("function"==typeof n?n(t,0,e,t.path):E(t,0)),""===t.path){var s={newDocument:e};if("add"===t.op)return s.newDocument=t.value,s;if("replace"===t.op)return s.newDocument=t.value,s.removed=e,s;if("move"===t.op||"copy"===t.op)return s.newDocument=_(e,t.from),"move"===t.op&&(s.removed=e),s;if("test"===t.op){if(s.test=S(e,t.value),!1===s.test)throw new m("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return s.newDocument=e,s}if("remove"===t.op)return s.removed=e,s.newDocument=null,s;if("_get"===t.op)return t.value=e,s;if(n)throw new m("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,t,e);return s}r||(e=l(e));var a=(t.path||"").split("/"),h=e,c=1,u=a.length,f=void 0,v=void 0,y=void 0;for(y="function"==typeof n?n:E;;){if(v=a[c],o&&"__proto__"==v)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===h[v]?f=a.slice(0,c).join("/"):c==u-1&&(f=t.path),void 0!==f&&y(t,0,e,f)),c++,Array.isArray(h)){if("-"===v)v=h.length;else{if(n&&!p(v))throw new m("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,t,e);p(v)&&(v=~~v)}if(c>=u){if(n&&"add"===t.op&&v>h.length)throw new m("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,t,e);if(!1===(s=b[t.op].call(t,h,v,e)).test)throw new m("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return s}}else if(v&&-1!=v.indexOf("~")&&(v=d(v)),c>=u){if(!1===(s=w[t.op].call(t,h,v,e)).test)throw new m("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return s}h=h[v]}}function P(e,t,n,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=!0),n&&!Array.isArray(t))throw new m("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=l(e));for(var i=new Array(t.length),s=0,a=t.length;s<a;s++)i[s]=O(e,t[s],n,!0,o,s),e=i[s].newDocument;return i.newDocument=e,i}function j(e,t,n){var r=O(e,t);if(!1===r.test)throw new m("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function E(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new m("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!w[e.op])throw new m("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new m("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new m('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new m("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new m("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0}else if("object"==typeof t){var o=u(t),i=o.length;for(n=0;n<i;n++)if(e(t[o[n]]))return!0}return!1}(e.value))throw new m("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var o=e.path.split("/").length,i=r.split("/").length;if(o!==i+1&&o!==i)throw new m("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new m("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var s=A([{op:"_get",path:e.from,value:void 0}],n);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new m("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function A(e,t,n){try{if(!Array.isArray(e))throw new m("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)P(l(t),l(e),n||!0);else{n=n||E;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof m)return e;throw e}}function S(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,o,i=Array.isArray(e),s=Array.isArray(t);if(i&&s){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!S(e[n],t[n]))return!1;return!0}if(i!=s)return!1;var a=Object.keys(e);if((r=a.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(a[n]))return!1;for(n=r;0!=n--;)if(!S(e[o=a[n]],t[o]))return!1;return!0}return e!=e&&t!=t}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var T=new WeakMap,R=function(e){this.observers=new Map,this.obj=e},x=function(e,t){this.callback=e,this.observer=t};function C(e,t){t.unobserve()}function N(e,t){var n,r=function(e){return T.get(e)}(e);if(r){var o=function(e,t){return e.observers.get(t)}(r,t);n=o&&o.observer}else r=new R(e),T.set(e,r);if(n)return n;if(n={},r.value=l(e),t){n.callback=t,n.next=null;var i=function(){k(n)},s=function(){clearTimeout(n.next),n.next=setTimeout(i)};"undefined"!=typeof window&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return n.patches=[],n.object=e,n.unobserve=function(){k(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},r.observers.set(t,new x(t,n)),n}function k(e,t){void 0===t&&(t=!1);var n=T.get(e.object);I(n.value,e.object,e.patches,"",t),e.patches.length&&P(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function I(e,t,n,r,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var i=u(t),s=u(e),a=!1,h=s.length-1;h>=0;h--){var p=e[v=s[h]];if(!c(t,v)||void 0===t[v]&&void 0!==p&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(o&&n.push({op:"test",path:r+"/"+f(v),value:l(p)}),n.push({op:"remove",path:r+"/"+f(v)}),a=!0):(o&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),!0);else{var d=t[v];"object"==typeof p&&null!=p&&"object"==typeof d&&null!=d?I(p,d,n,r+"/"+f(v),o):p!==d&&(!0,o&&n.push({op:"test",path:r+"/"+f(v),value:l(p)}),n.push({op:"replace",path:r+"/"+f(v),value:l(d)}))}}if(a||i.length!=s.length)for(h=0;h<i.length;h++){var v;c(e,v=i[h])||void 0===t[v]||n.push({op:"add",path:r+"/"+f(v),value:l(t[v])})}}}function U(e,t,n){void 0===n&&(n=!1);var r=[];return I(e,t,r,"",n),r}Object.assign({},r,o,{JsonPatchError:y,deepClone:l,escapePathComponent:f,unescapePathComponent:d});
/*!
 * https://github.com/Palindrom/JSONPatcherProxy
 * (c) 2017 Starcounter
 * MIT license
 *
 * Vocabulary used in this file:
 *  * root - root object that is deeply observed by JSONPatcherProxy
 *  * tree - any subtree within the root or the root
 */const M=function(){function e(e){return-1==e.indexOf("/")&&-1==e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function t(e,t){const n=[];let r=e._parenthoodMap.get(t);for(;r&&r.key;)n.unshift(r.key),r=e._parenthoodMap.get(r.parent);if(n.length){return"/"+n.join("/")}return""}function n(e,t,n){return n?function(e,t){void 0===e&&(e=null);void 0===t&&(t=null);return e!==t}(e,t):function(e,t){return e!==t}(e,t)}function r(e,t){this._isProxifyingTreeNow=!1,this._isObserving=!1,this._treeMetadataMap=new Map,this._parenthoodMap=new Map,"boolean"!=typeof t&&(t=!0),this._showDetachedWarning=t,this._originalRoot=e,this._cachedProxy=null,this._isRecording=!1,this._userCallback,this._defaultCallback,this._patches}return r.deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},r.escapePathComponent=e,r.prototype._generateProxyAtKey=function(r,o,i){if(!o)return o;const s={set:(...r)=>(function r(o,i,s,a){const h=t(o,i)+"/"+e(s),c=o._treeMetadataMap.get(a);o._treeMetadataMap.has(a)&&o._parenthoodMap.set(c.originalObject,{parent:i,key:s}),c&&!o._isProxifyingTreeNow&&(c.inherited=!0);let u=!1;const l=Array.isArray(i),p=l&&!Number.isInteger(+s.toString());a&&"object"==typeof a&&!o._treeMetadataMap.has(a)&&(p?(console.warn(`JSONPatcherProxy noticed a non-integer property ('${s}') was set for an array. This interception will not emit a patch. The value is an object, but it was not proxified, because it would not be addressable in JSON-Pointer`),u=!0):(o._parenthoodMap.set(a,{parent:i,key:s}),a=o._proxifyTreeRecursively(i,a,s)));const f=i[s],d=i.hasOwnProperty(s);if(l&&!p){const e=parseInt(s,10);e>i.length&&r(o,i,e-1+"",void 0)}const v=Reflect.set(i,s,a),y={op:"remove",path:h};if(void 0===a){if(!l&&!d)return v;{if(d&&!n(f,a,l))return v;l&&(y.value=null,y.op=d?"replace":"add");const e=o._treeMetadataMap.get(f);e&&(o._parenthoodMap.delete(f),o._disableTrapsForTreeMetadata(e),o._treeMetadataMap.delete(e))}}else{if(p)return"length"==s||u||console.warn(`JSONPatcherProxy noticed a non-integer property ('${s}') was set for an array. This interception will not emit a patch`),v;if(y.op="add",d&&(void 0!==f||l)){if(!n(f,a,l))return v;y.op="replace"}y.value=a}return o._defaultCallback(y),v})(this,...r),deleteProperty:(...n)=>(function(n,r,o){const i=r[o],s=Reflect.deleteProperty(r,o);if(void 0!==i){const s=t(n,r)+"/"+e(o),a=n._treeMetadataMap.get(i);a&&(a.inherited?a.inherited=!1:(n._parenthoodMap.delete(a.originalObject),n._disableTrapsForTreeMetadata(a),n._treeMetadataMap.delete(i))),n._defaultCallback({op:"remove",path:s})}return s})(this,...n)},a=Proxy.revocable(o,s);return a.handler=s,a.originalObject=o,this._parenthoodMap.set(o,{parent:r,key:i}),this._treeMetadataMap.set(a.proxy,a),a.proxy},r.prototype._proxifyTreeRecursively=function(t,n,r){for(let t in n)n.hasOwnProperty(t)&&n[t]instanceof Object&&(n[t]=this._proxifyTreeRecursively(n,n[t],e(t)));return this._generateProxyAtKey(t,n,r)},r.prototype._proxifyRoot=function(e){this.pause(),this._isProxifyingTreeNow=!0;const t=this._proxifyTreeRecursively(void 0,e,"");return this._isProxifyingTreeNow=!1,this.resume(),t},r.prototype._disableTrapsForTreeMetadata=function(e){if(this._showDetachedWarning){const t="You're accessing an object that is detached from the observedObject tree, see https://github.com/Palindrom/JSONPatcherProxy#detached-objects";e.handler.set=(e,n,r)=>(console.warn(t),Reflect.set(e,n,r)),e.handler.set=(e,n,r)=>(console.warn(t),Reflect.set(e,n,r)),e.handler.deleteProperty=(e,t)=>Reflect.deleteProperty(e,t)}else delete e.handler.set,delete e.handler.get,delete e.handler.deleteProperty},r.prototype.observe=function(e,t){if(!e&&!t)throw new Error("You need to either record changes or pass a callback");return this._isRecording=e,this._userCallback=t,e&&(this._patches=[]),this._cachedProxy=this._proxifyRoot(this._originalRoot),this._cachedProxy},r.prototype.generate=function(){if(!this._isRecording)throw new Error("You should set record to true to get patches later");return this._patches.splice(0,this._patches.length)},r.prototype.revoke=function(){this._treeMetadataMap.forEach(e=>{e.revoke()})},r.prototype.disableTraps=function(){this._treeMetadataMap.forEach(this._disableTrapsForTreeMetadata,this)},r.prototype.resume=function(){this._defaultCallback=e=>{this._isRecording&&this._patches.push(e),this._userCallback&&this._userCallback(e)},this._isObserving=!0},r.prototype.pause=function(){this._defaultCallback=()=>{},this._isObserving=!1},r}(),L=function(e,t,n,r){this.obj=e,this.waiting=[],this.localPath=t[0],this.remotePath=t[1],this.apply=n,this.purist=r};L.prototype.localVersion=0,L.prototype.remoteVersion=0,L.prototype.receive=function(e,t){const n=t||this.apply;let r=e.slice(0);this.purist&&r.shift();const o=r.shift().value;if(o<=this.remoteVersion)throw new Error("Given version was already applied.");if(o==this.remoteVersion+1)for(;r;)this.remoteVersion++,this.obj=n(this.obj,r),r=this.waiting.shift();else this.waiting[o-this.remoteVersion-2]=r},L.prototype.send=function(e){this.localVersion++;const t=e.slice(0);return this.purist?t.unshift({op:"test",path:this.localPath,value:this.localVersion-1},{op:"replace",path:this.localPath,value:this.localVersion}):t.unshift({op:"replace",path:this.localPath,value:this.localVersion}),t},L.getPropertyByJsonPointer=function(e,t){const n=t.split("/");""===n[0]&&n.shift();let r,o=e;for(;n.length;)r=n.shift().replace("~1","/").replace("~0","~"),n.length&&(o=o[r]);return o[r]},L.prototype.reset=function(e){this.remoteVersion=L.getPropertyByJsonPointer(e,this.remotePath),this.waiting=[];const t=[{op:"replace",path:"",value:e}];return this.obj=this.apply(this.obj,t)};const q=function(e,t,n,r){this.obj=e,this.waiting=[],this.versionPath=t,this.apply=n,this.purist=r};q.prototype.version=0,q.prototype.receive=function(e,t){const n=t||this.apply;let r=e.slice(0);this.purist&&r.shift();const o=r.shift().value;if(o<=this.version)throw new Error("Given version was already applied.");if(o==this.version+1)for(;r;)this.version++,this.obj=n(this.obj,r),r=this.waiting.shift();else this.waiting[o-this.version-2]=r},q.prototype.send=function(e){this.version++;const t=e.slice(0);return t.unshift({op:"replace",path:this.versionPath,value:this.version}),this.purist&&t.unshift({op:"test",path:this.versionPath,value:this.version-1}),t},q.getPropertyByJsonPointer=function(e,t){const n=t.split("/");""===n[0]&&n.shift();let r,o=e;for(;n.length;)r=n.shift().replace("~1","/").replace("~0","~"),n.length&&(o=o[r]);return o[r]},q.prototype.reset=function(e){this.version=q.getPropertyByJsonPointer(e,this.versionPath),this.waiting=[];const t=[{op:"replace",path:"",value:e}];return this.obj=this.apply(this.obj,t)};var V=function(){var e=e||{};e.transform=function(e,n){var r=[];r=r.concat.apply(r,n);var o=JSON.parse(JSON.stringify(e));return r.reduce(t,o)},e.transformAgainstSingleOp=function(e,t){};var t=function(e,t){if(void 0===t.value&&("add"===t.op||"replace"===t.op||"test"===t.op))throw new Error("'value' MUST be defined");if(void 0===t.from&&("copy"===t.op||"move"===t.op))throw new Error("'from' MUST be defined");if(n[t.op])if("function"==typeof n[t.op])n[t.op](t,e);else for(var r=e.length,o=0;o<r;){var i=e[o];o++,n[t.op][i.op]&&n[t.op][i.op](t,i)}return e},n={remove:function(e,t){for(var n,i=t.length,s=0;n=t[s];)("add"!==n.op&&"test"!==n.op||e.path!==n.path)&&(n.from&&(n.from===e.path||0===n.from.indexOf(e.path+"/"))||e.path===n.path||0===n.path.indexOf(e.path+"/"))&&(t.splice(s,1),i--,s--),s++;var a=e.path.lastIndexOf("/");if(a>-1){var h=e.path.substr(a+1),c=e.path.substr(0,a+1);if(o(h))for(i=t.length,s=0;s<i;)n=t[s],s++,0===n.path.indexOf(c)&&(n.path=r(n.path,c,h)),n.from&&0===n.from.indexOf(c)&&(n.from=r(n.from,c,h))}},replace:function(e,t){for(var n,r=0;n=t[r];)(n.from&&(n.from===e.path||0===n.from.indexOf(e.path+"/"))||0===n.path.indexOf(e.path+"/"))&&(t.splice(r,1),r--),r++}};function r(e,t,n){var r=e.substr(t.length),i=r.indexOf("/");i>-1||(i=r.length);var s=r.substr(0,i),a=r.substr(i);return o(s)&&s>n?t+(s-1)+a:e}function o(e){var t=~~Number(e);return String(t)===e&&t>=0}return e}(),D=function(e,t,n,r,o){L.call(this,e,n,r,o),this.transform=t,this.pending=[]};
/*!
 * https://github.com/Palindrom/JSONPatchOT
 * JSON-Patch-OT version: 3.0.0-0
 * (c) 2017 Tomek Wytrebowicz
 * MIT license
 */D.prototype=Object.create(L.prototype),D.prototype.constructor=D,D.prototype.ackLocalVersion=0,D.prototype.send=function(e){var t=e.slice(0);t.unshift({op:"test",path:this.remotePath,value:this.remoteVersion});var n=L.prototype.send.call(this,t);return this.pending.push(n),n},D.prototype.receive=function(e,t){var n=t||this.apply,r=this;return L.prototype.receive.call(this,e,function(e,t){var o=t.slice(0),i=o.shift().value,s=i-r.ackLocalVersion;return r.ackLocalVersion=i,r.pending.splice(0,s),r.pending.length&&(o=r.transform(o,r.pending)),r.obj=n(r.obj,o)})},D.prototype.reset=function(e){return this.ackLocalVersion=L.getPropertyByJsonPointer(e,this.localPath),this.pending=[],this.obj=L.prototype.reset.call(this,e)};var F=n(0);function J(e,t,n){let r,o,i,s;const a=1e3;function h(){r=a,o=0,i=!1,clearTimeout(s),s=null}const c=()=>{0==o?(t(0),i=!1,r*=2,e()):(t(o),o-=1e3,setTimeout(c,1e3))};this.triggerReconnection=()=>{i||(o=r,i=!0,c())},this.reconnectNow=()=>{o=0,r=a},this.stopReconnecting=()=>{h(),n()},h()}class W{constructor(e,t){this.obj=e,this.apply=t}send(e){return e}receive(e){return this.obj=this.apply(this.obj,e)}reset(e){const t=[{op:"replace",path:"",value:e}];return this.obj=this.apply(this.obj,t)}}n.d(t,"Palindrom",function(){return B});
/*! Palindrom
 * https://github.com/Palindrom/Palindrom
 * (c) 2017 Joachim Wester
 * MIT license
 */
const H="6.2.0";if(void 0===$)if("undefined"!=typeof window)var $=window;else $={};class B{static get version(){return H}constructor(e){if(this.version=H,"object"!=typeof e)throw new TypeError("Palindrom constructor requires an object argument.");if(!e.remoteUrl)throw new TypeError("remoteUrl is required");function t(){}e.callback&&console.warn("options.callback is deprecated. Please use `onStateReset` instead"),this.debug=null==e.debug||e.debug,this.isObserving=!1,this.onLocalChange=e.onLocalChange||t,this.onRemoteChange=e.onRemoteChange||t,this.onStateReset=e.onStateReset||e.callback||t,this.filterLocalChange=e.filterLocalChange||(e=>e),this.onPatchReceived=e.onPatchReceived||t,this.onPatchSent=e.onPatchSent||t,this.onSocketStateChanged=e.onSocketStateChanged||t,this.onConnectionError=e.onConnectionError||t,this.retransmissionThreshold=e.retransmissionThreshold||3,this.onReconnectionCountdown=e.onReconnectionCountdown||t,this.onReconnectionEnd=e.onReconnectionEnd||t,this.onSocketOpened=e.onSocketOpened||t,this.onIncomingPatchValidationError=e.onIncomingPatchValidationError||t,this.onOutgoingPatchValidationError=e.onOutgoingPatchValidationError||t,this.onError=e.onError||t,this.reconnector=new J(()=>this._connectToRemote(this.queue.pending),this.onReconnectionCountdown,this.onReconnectionEnd),this.network=new s.a(this,e.remoteUrl,e.useWebSocket||!1,this.handleRemoteChange.bind(this),this.onPatchSent.bind(this),this.onConnectionError.bind(this),this.onSocketOpened.bind(this),this.onSocketStateChanged.bind(this),e.pingIntervalS),this.OTPatchIndexOffset=0,e.localVersionPath?e.remoteVersionPath?(this.OTPatchIndexOffset=2,e.ot?this.queue=new D(this.obj,V.transform,[e.localVersionPath,e.remoteVersionPath],this.validateAndApplySequence.bind(this),e.purity):this.queue=new L(this.obj,[e.localVersionPath,e.remoteVersionPath],this.validateAndApplySequence.bind(this),e.purity)):(this.OTPatchIndexOffset=1,this.queue=new q(this.obj,e.localVersionPath,this.validateAndApplySequence.bind(this),e.purity)):this.queue=new W(this.obj,this.validateAndApplySequence.bind(this)),this._connectToRemote()}async _connectToRemote(e=null){const t=await this.network._establish(e);this.reconnector.stopReconnecting(),this.debug&&(this.remoteObj=JSON.parse(JSON.stringify(t))),this.queue.reset(t)}get useWebSocket(){return this.network.useWebSocket}set useWebSocket(e){this.network.useWebSocket=e}_sendPatch(e){this.unobserve(),this.network.send(e),this.observe()}prepareProxifiedObject(e){e||(e={}),this.jsonPatcherProxy=new M(e);const t=this.jsonPatcherProxy.observe(!1,e=>{const t=this.filterLocalChange(e);t&&this.handleLocalChange(t)});Object.defineProperty(this,"obj",{get:()=>t,set(){throw new Error("palindrom.obj is readonly")},configurable:!0}),this.isObserving=!0}observe(){this.jsonPatcherProxy&&this.jsonPatcherProxy.resume(),this.isObserving=!0}unobserve(){this.jsonPatcherProxy&&this.jsonPatcherProxy.pause(),this.isObserving=!1}handleLocalChange(e){e.value&&G(e.value,this.onOutgoingPatchValidationError,e.path);const t=[e];this.debug&&this.validateSequence(this.remoteObj,t),this._sendPatch(this.queue.send(t)),this.onLocalChange(t)}validateAndApplySequence(e,t){try{this.unobserve();const n=P(e,t,this.debug);if(this.observe(),n.newDocument!==e){this.prepareProxifiedObject(n.newDocument),this.queue.obj=this.obj,G(this.obj,this.onIncomingPatchValidationError);try{this.onStateReset(this.obj)}catch(e){this.onError(new F.b(`Error inside onStateReset callback: ${e.message}`)),console.error(e)}}this.onRemoteChange(t,n)}catch(e){if(this.debug)return void this.onIncomingPatchValidationError(e);throw e}return this.obj}validateSequence(e,t){const n=A(t,e);n&&this.onOutgoingPatchValidationError(n)}reconnectNow(){this.reconnector.reconnectNow()}handleRemoteChange(e,t,n){this.onPatchReceived(e,t,n);const r=e||[];!function(e,t,n){for(let r=n,o=e.length;r<o;r++)G(e[r].value,t,e[r].path)}(r,this.onIncomingPatchValidationError,this.OTPatchIndexOffset),0!==r.length&&this.isObserving&&(this.queue.receive(r),this.queue.pending&&this.queue.pending.length&&this.queue.pending.length>this.retransmissionThreshold&&this.queue.pending.forEach(this._sendPatch,this),this.debug&&(this.remoteObj=JSON.parse(JSON.stringify(this.obj))))}stop(){this.unobserve(),this.reconnector.stopReconnecting(),this.network.stop()}}function G(e,t,n=""){const r=typeof e;if("object"==r)for(const r in e)e.hasOwnProperty(r)&&G(e[r],t,n+"/"+r);else"number"===r&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&t(new RangeError(`A number that is either bigger than Number.MAX_INTEGER_VALUE or smaller than Number.MIN_INTEGER_VALUE has been encountered in a patch, value is: ${e}, variable path is: ${n}`))}}]).default;